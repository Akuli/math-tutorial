<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="style.css">
<title>Geometry and Trig</title>

<script type="text/x-mathjax-config">
  // awesome, i have javascript inside html inside python
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'] ],
      displayMath: [ ['$$','$$'] ],
    },
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
</head>
<body>
<div id="content">
<div id="sidebar"><div class="sidebarblock"><h3>Useful</h3><ul><li><a href="derivatives.html">Derivatives</a></li><li><b>Geometry and Trig</b></li><li><a href="numbertheory.html">Number Theory</a></li></ul></div><div class="sidebarblock"><h3>Kinda fun</h3><ul><li><a href="integrals.html">Integrals</a></li><li><a href="more-integrals.html">More Integrals</a></li></ul></div><div class="sidebarblock"><h3>Mathy</h3><ul><li><a href="more-derivatives.html">More Derivatives</a></li><li><a href="more-geometry-and-trig.html">More Geometry and Trig</a></li><li><a href="explog.html">Exponent Functions and Logarithms</a></li></ul></div><div class="sidebarblock"><h3>Mind-blowing</h3><ul><li><a href="taylor.html">Taylor Polynomials</a></li><li><a href="eulerformula.html">Euler's Formula</a></li></ul></div><div class="sidebarblock"><h3>Other stuff</h3><ul><li><a href="basics.html">The Basics</a></li><li><a href="graphs.html">Common Graphs</a></li><li><a href="summary.html">Summary</a></li></ul><h3><a href="index.html">Back to front page</a></h3></div></div>
<h1 id="geometry-and-trig">Geometry and Trig<a class="headerlink" href="#geometry-and-trig" title="Link to this title">¶</a></h1><p>This chapter contains useful stuff that aren't too difficult to get started
with. You'll find it especially useful if you like writing games, and this
chapter contains a working example game.</p>

<div class="box graybox"><h2> Note</h2><p>Usually the y axis is so that more y means up, but in this chapter it's
"upside down" and more y means down. Almost all programming things use the
"more y means down" version and are compatible with this chapter.</p>

<p>If you're a mathematician everything looks really weird to you, but if
you're a programmer who wants to get stuff done you'll enjoy not having to
add minus signs everywhere before using formulas from this tutorial.
</p>

</div><img width="228" height="221" class="asymptote" src="asymptote/8ddeb2c0e59514352b553bd5bb261ede.svg" style="float:right; padding-left:5px;" /><img width="114" height="100" class="asymptote" src="asymptote/cdc74b2fa9923423f52862ac567ec8a5.svg" style="float:right; padding-left:5px;" /><h2 id="radians-and-tau">Radians and Tau<a class="headerlink" href="#radians-and-tau" title="Link to this title">¶</a></h2><p>Angles are often measured in radians. The angles in the pictures at right are
both one radian. The angle is always 1 radian if the arc and radius lengths are
equal, and it doesn't matter what that length is.</p>

<img width="114" height="114" class="asymptote" src="asymptote/8b6ace74c6f849404001519f231b56a0.svg" style="float:left; padding-right:20px;" /><p>If we try to fill a circle with these 1 radian slices, 6 of them fit and
there's some room left over. To be more precise, we can add 6.2831853...
slices. This number is called tau and written with the Greek tau letter $\tau$.
So, a full turn is $\tau$ radians. Be careful not to confuse $\tau$ with other
letters like $t$.</p>

<img width="114" height="66" class="asymptote" src="asymptote/b7f5f05a915a2557b2e86ee4bc94e875.svg" style="float:right;" /><p>The yellow slice at right shows another way to define an angle in radians, and
it's compatible with the green slices because if we set $b=r$ the angle is
$r/r=1$ radian.</p>

<p>Sometimes the yellow slice definition is handier; for example, if we draw a
full circle we know the angle in the center is $\tau$ radians (full turn), so
we get this:</p>

<img width="142" height="123" class="asymptote" src="asymptote/252e9ab0d34a1791201c03cbbbc8537e.svg" style="float:right; margin: 0,0,0,20px;" />$$\begin{align}
\frac b r &= \tau \\
b &= \tau r
\end{align}$$<p>So we can multiply with tau to get from a radius to a perimeter. This is how
$\tau$ is usually defined.</p>

<p>Some programming languages like new Pythons have a <code>tau</code> constant, but if
your favorite language doesn't, use <code>2*pi</code> instead. Here pi is the more
well-known circle constant $\pi = \tau/2 = 3.14159265...$, and almost all
programming languages have something like <code>math.pi</code> or <code>Math.PI</code>. I find
$\tau$ easier to work with than $\pi$ because if I see $\tau/4$ somewhere I
know immediately that it's a quarter turn, but $\pi/2$ isn't as obvious. Of
course, you can use $\pi$ if you prefer it over $\tau$.
</p>

<h2 id="degrees">Degrees<a class="headerlink" href="#degrees" title="Link to this title">¶</a></h2><p>Degrees are an alternative to radians, and they work so that 360° is a full
turn. Here ° is the degree symbol, and 360 is a number that people ended up
using for historical reasons.</p>

<p>If you need to convert between radians and degrees, use the fact that 360
degrees is $\tau$ radians. Here's a Python example:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">degrees2radians</span>(degrees):
    <span style="color: #007020; font-weight: bold">return</span> degrees <span style="color: #666666">/</span> <span style="color: #40a070">360</span> <span style="color: #666666">*</span> math<span style="color: #666666">.</span>tau

<span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">radians2degrees</span>(radians):
    <span style="color: #007020; font-weight: bold">return</span> radians <span style="color: #666666">/</span> math<span style="color: #666666">.</span>tau <span style="color: #666666">*</span> <span style="color: #40a070">360</span>
</pre></div>
<p>Use <code>180</code> and <code>pi</code> instead of <code>360</code> and <code>tau</code> if your programming
language doesn't have a <code>tau</code> constant. You can also do something like
<code>TAU = 2*Math.PI</code>. Or better yet, some programming languages feature
conversion functions in standard libraries like Python's <code>math.radians()</code> and
<code>math.degrees()</code>.
</p>

<h2 id="basic-angle-stuff">Basic Angle Stuff<a class="headerlink" href="#basic-angle-stuff" title="Link to this title">¶</a></h2><div class="box graybox"><h2> Problem</h2><p>The ball of a ball-and-paddle game is moving at the angle of 0.5 radians
and it hits a wall at right. How should the angle change?</p>

<p><img width="256" height="245" class="asymptote" src="asymptote/762396cc0436e676b6d18a5e162ba9a8.svg" /></p></div><p>Note that both angles are measured down from a horizontal line clockwise
because that's a standard in programming. In math, angles are usually measured
up from a horizontal line and counter-clockwise.</p>

<p>We can solve our problem by taking the 0.5 radian angle sign and moving it like
this:</p>

<p><img width="199" height="112" class="asymptote" src="asymptote/66ead1ba69afa6f7fd4384a24fb6b764.svg" /></p><p>Now you can see that the angles add up to half turn, and that's $\tau/2 = \pi$
radians, so we get this <a href="basics.html#equations">equation</a>:</p>

$$\begin{align}
0.5 + \text{???} &= \frac \tau 2 \\
\text{???} &= \frac \tau 2 - 0.5 \\
\text{???} &\approx 2.64
\end{align}$$<p>I did the last step with Python.</p>

<p>In math it's common to use a letter instead of "???" to represent an
unknown value. For example:</p>

$$\begin{align}
0.5 + b &= \frac \tau 2 \\
b &= \frac \tau 2 - 0.5 \approx 2.64
\end{align}$$<p>It's easy to calculate similar things for other directions. Here are the
results, where $a$ is the original angle and $b$ is the changed angle:</p>

<ul><li>If the ball hits left or right wall, $b = \frac \tau 2 - a$.</li><li>If the ball hits top or bottom, $b = \tau - a$.
</li></ul><p>Note that an angle like $-2$ radians is perfectly valid and equivalent to
$\tau-2$ radians. If you want to make sure that an angle is between $0$ and
$\tau$, use something like <code>angle % tau</code> where <code>%</code> is division remainder.
</p>

<h2 id="trig-with-the-unit-circle">Trig with the Unit Circle<a class="headerlink" href="#trig-with-the-unit-circle" title="Link to this title">¶</a></h2><div class="box graybox"><h2> Problem</h2><p>This time the ball moves at the angle of $\tau/6$, and it should move 5
pixels every time the screen is updated. How many pixels should its x and y
change every time?</p>

<p><img width="285" height="188" class="asymptote" src="asymptote/4a7581f74964581b28a0ae41c546e168.svg" /></p></div><p>Our problem has something to do with sine and cosine. The unit circle is a
circle with radius 1 placed in the middle of the xy plane. Here's a picture that
shows what sine and cosine are:</p>

<p><img width="254" height="256" class="asymptote" src="asymptote/ea6dbd965c9d46737f487e1b5aab8157.svg" /></p><p>This is really simple: the x coordinate is $\cos(t)$ and the y coordinate is
$\sin(t)$. But the radius of the unit circle is 1 instead of our 5, so we need
to multiply everything by 5 to scale it up. We get this:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>ball<span style="color: #666666">.</span>x <span style="color: #666666">+=</span> <span style="color: #40a070">5</span><span style="color: #666666">*</span>cos(tau<span style="color: #666666">/</span><span style="color: #40a070">6</span>)
ball<span style="color: #666666">.</span>y <span style="color: #666666">+=</span> <span style="color: #40a070">5</span><span style="color: #666666">*</span>sin(tau<span style="color: #666666">/</span><span style="color: #40a070">6</span>)
</pre></div>
<p>Note that <code>cos()</code> and <code>sin()</code> functions use radians by default in almost
all programming languages. Let's try this out with Python just to make sure
that everything works:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span><span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">math</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>math<span style="color: #666666">.</span>sin(math<span style="color: #666666">.</span>tau<span style="color: #666666">/</span><span style="color: #40a070">6</span>)
<span style="color: #888888">0.8660254037844386</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>math<span style="color: #666666">.</span>cos(math<span style="color: #666666">.</span>tau<span style="color: #666666">/</span><span style="color: #40a070">6</span>)
<span style="color: #888888">0.5000000000000001</span>
</pre></div>
<p>These results make sense because the angle $t$ in the above image looks like
it's about a sixth of a turn (or $\tau/6$), so $\sin(\tau/6)$ should be close
to 1 because the circle's bottom is at $y=1$. Similarly, the $\cos(t)$ marked on
the picture seems to be about half of the radius, and the radius is 1.</p>

<p id="accurate-sincos"><code>0.5000000000000001</code> is obviously not an accurate result, but it's good
enough for a programmer while a mathematician would say that
$\sin\left(\frac \tau 6\right) = \frac{\sqrt 3}{2}$ and
$\cos\left(\frac \tau 6\right) = \frac 1 2$. See <a href="more-geometry-and-trig.html#accurate-sine-and-cosine-values">this
thing</a> if
you're wondering how I came up with these values.
</p>

<h2 id="example-ball-and-paddle">Example: Ball and Paddle<a class="headerlink" href="#example-ball-and-paddle" title="Link to this title">¶</a></h2><p>Here's a minimal game written with my <a href="https://github.com/Akuli/math-tutorial/blob/master/canvaswrapper.js">canvaswrapper.js</a> script that
demonstrates most things we have learned so far. Click it, press arrow up to
start the game and then use arrow keys to move the paddle.</p>

<script type="text/javascript" src="canvaswrapper.js"></script><canvas id="canvas1" width="600" height="400" tabindex="1"></canvas><script>var screen = new CanvasWrapper('canvas1');

const TAU = Math.PI*2;

var paddle = {
  length: 200,
  thickness: 15,
  speed: 10,
  movement: 0,             // -1 means left, 0 means right
};
paddle.top = screen.height - paddle.thickness;

var ball = {
  radius: 10,
  speed: 10,
  moving: false,
};

function resetGame() {
  paddle.centerx = screen.width/2;
  ball.centerx = screen.width/2;
  ball.centery = screen.height-paddle.thickness-ball.radius;
  ball.angle = 0.75*TAU;
  ball.moving = false;
}

resetGame();
runRepeatedly(function() {
  screen.fill('black');
  screen.drawRectangle(
    paddle.centerx-paddle.length/2, screen.height-paddle.thickness,
    paddle.length, paddle.thickness, '#00ff00');
  screen.drawCircle(ball.centerx, ball.centery, ball.radius, 'white');

  if (ball.moving) {
    if (ball.centery > screen.height) {
      resetGame();
      return;
    }

    ball.centerx += ball.speed * Math.cos(ball.angle);
    ball.centery += ball.speed * Math.sin(ball.angle);

    if (ball.centerx < ball.radius) {     // bumps left wall
      ball.angle = TAU/2 - ball.angle;
      ball.centerx = ball.radius;
    } else if (ball.centerx > screen.width-ball.radius) {   // right wall
      ball.angle = TAU/2 - ball.angle;
      ball.centerx = screen.width-ball.radius;
    } else if (ball.centery < ball.radius) {          // top
      ball.angle = TAU - ball.angle;
      ball.centery = ball.radius;
    } else if (ball.centery > screen.height-paddle.thickness-ball.radius) {
      // paddle?
      paddleLeft = paddle.centerx - paddle.length/2;
      paddleRight = paddle.centerx + paddle.length/2;
      if (paddleLeft < ball.centerx && ball.centerx < paddleRight) {
        // yes, it hits the paddle
        ball.angle = TAU - ball.angle;
        ball.centery = screen.height-paddle.thickness-ball.radius;

        // also adjust the angle depending on which side of the paddle the
        // ball hits
        ball.angle += (ball.centerx - paddle.centerx) / 100;
      }
    }
    paddle.centerx += paddle.movement*paddle.speed;
  }

  screen.getEvents().forEach(evt => {
    if (evt.type == 'keydown') {
      if (ball.moving) {
        if (evt.key == 'ArrowLeft') {
          paddle.movement = -1;
        } else if (evt.key == 'ArrowRight') {
          paddle.movement = 1;
        }
      } else {
        if (evt.key == 'ArrowUp') {
          ball.moving = true;
          return;
        }
      }
    } else if (evt.type == 'keyup' && (
          (evt.key == 'ArrowLeft' && paddle.movement == -1) ||
          (evt.key == 'ArrowRight' && paddle.movement == 1))) {
      // cancel the previous ArrowLeft or ArrowRight press
      paddle.movement = 0;
    }
  });
});
</script><p>Here's the code:</p><div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #007020; font-weight: bold">var</span> screen <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">new</span> CanvasWrapper(<span style="color: #4070a0">&#39;canvas1&#39;</span>);

<span style="color: #007020; font-weight: bold">const</span> TAU <span style="color: #666666">=</span> <span style="color: #007020">Math</span>.PI<span style="color: #666666">*</span><span style="color: #40a070">2</span>;

<span style="color: #007020; font-weight: bold">var</span> paddle <span style="color: #666666">=</span> {
  length<span style="color: #666666">:</span> <span style="color: #40a070">200</span>,
  thickness<span style="color: #666666">:</span> <span style="color: #40a070">15</span>,
  speed<span style="color: #666666">:</span> <span style="color: #40a070">10</span>,
  movement<span style="color: #666666">:</span> <span style="color: #40a070">0</span>,             <span style="color: #60a0b0; font-style: italic">// -1 means left, 0 means right</span>
};
paddle.top <span style="color: #666666">=</span> screen.height <span style="color: #666666">-</span> paddle.thickness;

<span style="color: #007020; font-weight: bold">var</span> ball <span style="color: #666666">=</span> {
  radius<span style="color: #666666">:</span> <span style="color: #40a070">10</span>,
  speed<span style="color: #666666">:</span> <span style="color: #40a070">10</span>,
  moving<span style="color: #666666">:</span> <span style="color: #007020; font-weight: bold">false</span>,
};

<span style="color: #007020; font-weight: bold">function</span> resetGame() {
  paddle.centerx <span style="color: #666666">=</span> screen.width<span style="color: #666666">/</span><span style="color: #40a070">2</span>;
  ball.centerx <span style="color: #666666">=</span> screen.width<span style="color: #666666">/</span><span style="color: #40a070">2</span>;
  ball.centery <span style="color: #666666">=</span> screen.height<span style="color: #666666">-</span>paddle.thickness<span style="color: #666666">-</span>ball.radius;
  ball.angle <span style="color: #666666">=</span> <span style="color: #40a070">0.75</span><span style="color: #666666">*</span>TAU;
  ball.moving <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">false</span>;
}

resetGame();
runRepeatedly(<span style="color: #007020; font-weight: bold">function</span>() {
  screen.fill(<span style="color: #4070a0">&#39;black&#39;</span>);
  screen.drawRectangle(
    paddle.centerx<span style="color: #666666">-</span>paddle.length<span style="color: #666666">/</span><span style="color: #40a070">2</span>, screen.height<span style="color: #666666">-</span>paddle.thickness,
    paddle.length, paddle.thickness, <span style="color: #4070a0">&#39;#00ff00&#39;</span>);
  screen.drawCircle(ball.centerx, ball.centery, ball.radius, <span style="color: #4070a0">&#39;white&#39;</span>);

  <span style="color: #007020; font-weight: bold">if</span> (ball.moving) {
    <span style="color: #007020; font-weight: bold">if</span> (ball.centery <span style="color: #666666">&gt;</span> screen.height) {
      resetGame();
      <span style="color: #007020; font-weight: bold">return</span>;
    }

    ball.centerx <span style="color: #666666">+=</span> ball.speed <span style="color: #666666">*</span> <span style="color: #007020">Math</span>.cos(ball.angle);
    ball.centery <span style="color: #666666">+=</span> ball.speed <span style="color: #666666">*</span> <span style="color: #007020">Math</span>.sin(ball.angle);

    <span style="color: #007020; font-weight: bold">if</span> (ball.centerx <span style="color: #666666">&lt;</span> ball.radius) {     <span style="color: #60a0b0; font-style: italic">// bumps left wall</span>
      ball.angle <span style="color: #666666">=</span> TAU<span style="color: #666666">/</span><span style="color: #40a070">2</span> <span style="color: #666666">-</span> ball.angle;
      ball.centerx <span style="color: #666666">=</span> ball.radius;
    } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (ball.centerx <span style="color: #666666">&gt;</span> screen.width<span style="color: #666666">-</span>ball.radius) {   <span style="color: #60a0b0; font-style: italic">// right wall</span>
      ball.angle <span style="color: #666666">=</span> TAU<span style="color: #666666">/</span><span style="color: #40a070">2</span> <span style="color: #666666">-</span> ball.angle;
      ball.centerx <span style="color: #666666">=</span> screen.width<span style="color: #666666">-</span>ball.radius;
    } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (ball.centery <span style="color: #666666">&lt;</span> ball.radius) {          <span style="color: #60a0b0; font-style: italic">// top</span>
      ball.angle <span style="color: #666666">=</span> TAU <span style="color: #666666">-</span> ball.angle;
      ball.centery <span style="color: #666666">=</span> ball.radius;
    } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (ball.centery <span style="color: #666666">&gt;</span> screen.height<span style="color: #666666">-</span>paddle.thickness<span style="color: #666666">-</span>ball.radius) {
      <span style="color: #60a0b0; font-style: italic">// paddle?</span>
      paddleLeft <span style="color: #666666">=</span> paddle.centerx <span style="color: #666666">-</span> paddle.length<span style="color: #666666">/</span><span style="color: #40a070">2</span>;
      paddleRight <span style="color: #666666">=</span> paddle.centerx <span style="color: #666666">+</span> paddle.length<span style="color: #666666">/</span><span style="color: #40a070">2</span>;
      <span style="color: #007020; font-weight: bold">if</span> (paddleLeft <span style="color: #666666">&lt;</span> ball.centerx <span style="color: #666666">&amp;&amp;</span> ball.centerx <span style="color: #666666">&lt;</span> paddleRight) {
        <span style="color: #60a0b0; font-style: italic">// yes, it hits the paddle</span>
        ball.angle <span style="color: #666666">=</span> TAU <span style="color: #666666">-</span> ball.angle;
        ball.centery <span style="color: #666666">=</span> screen.height<span style="color: #666666">-</span>paddle.thickness<span style="color: #666666">-</span>ball.radius;

        <span style="color: #60a0b0; font-style: italic">// also adjust the angle depending on which side of the paddle the</span>
        <span style="color: #60a0b0; font-style: italic">// ball hits</span>
        ball.angle <span style="color: #666666">+=</span> (ball.centerx <span style="color: #666666">-</span> paddle.centerx) <span style="color: #666666">/</span> <span style="color: #40a070">100</span>;
      }
    }
    paddle.centerx <span style="color: #666666">+=</span> paddle.movement<span style="color: #666666">*</span>paddle.speed;
  }

  screen.getEvents().forEach(evt =&gt; {
    <span style="color: #007020; font-weight: bold">if</span> (evt.type <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;keydown&#39;</span>) {
      <span style="color: #007020; font-weight: bold">if</span> (ball.moving) {
        <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowLeft&#39;</span>) {
          paddle.movement <span style="color: #666666">=</span> <span style="color: #666666">-</span><span style="color: #40a070">1</span>;
        } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowRight&#39;</span>) {
          paddle.movement <span style="color: #666666">=</span> <span style="color: #40a070">1</span>;
        }
      } <span style="color: #007020; font-weight: bold">else</span> {
        <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowUp&#39;</span>) {
          ball.moving <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">true</span>;
          <span style="color: #007020; font-weight: bold">return</span>;
        }
      }
    } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (evt.type <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;keyup&#39;</span> <span style="color: #666666">&amp;&amp;</span> (
          (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowLeft&#39;</span> <span style="color: #666666">&amp;&amp;</span> paddle.movement <span style="color: #666666">==</span> <span style="color: #666666">-</span><span style="color: #40a070">1</span>) <span style="color: #666666">||</span>
          (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowRight&#39;</span> <span style="color: #666666">&amp;&amp;</span> paddle.movement <span style="color: #666666">==</span> <span style="color: #40a070">1</span>))) {
      <span style="color: #60a0b0; font-style: italic">// cancel the previous ArrowLeft or ArrowRight press</span>
      paddle.movement <span style="color: #666666">=</span> <span style="color: #40a070">0</span>;
    }
  });
});
</pre></div>
<h2 id="trig-with-a-triangle">Trig with a Triangle<a class="headerlink" href="#trig-with-a-triangle" title="Link to this title">¶</a></h2><div class="box graybox"><h2> Problem</h2><p>The ball moves 10 pixels down and 20 pixels right. What angle is that?
</p>

</div><p>Here's another way to define $\sin$ and $\cos$, and another function called
$\tan$ that we haven't used before.</p>

<img width="171" height="121" class="asymptote" src="asymptote/74cbd34ca0945193971abf3e99d5ee37.svg" style="float:right;" />$$\begin{align}
\sin(t) &= \frac b c \\
\cos(t) &= \frac a c \\
\tan(t) &= \frac b a
\end{align}$$<p>We'll talk about compatibility with the unit circle definitions
<a href="more-geometry-and-trig.html#unit-circle-or-triangle">later</a>. These things work
only if the triangle has an angle that is exactly a quarter turn, and the little
box at bottom right means just that.</p>

<img width="171" height="121" class="asymptote" src="asymptote/d5c920cd486e0028f282af6184cb91d1.svg" style="float:right;" /><p>The green triangle is just like the blue one, but I flipped it so that we can
calculate the stuff by plugging in $a=20$ and $b=10$ without worrying about
which way things go. Let's figure out how to calculate the $t$:</p>

$$\begin{align}
\tan(t) &= \frac b a \\
t &= \arctan\left(\frac b a\right) = \text{atan2}(b, a)
\end{align}$$<p>Here $\arctan$ is the inverse of $\tan$, so $\arctan(\tan(t)) = t$. Most
programming languages have an <code>atan(x)</code> function that returns $\arctan x$,
but I don't recommend using it in this case; the <code>atan2(b,a)</code> function
returns $\arctan\left(\frac b a\right)$ and I recommend it instead. <code>atan2</code>
looks at the signs of $a$ and $b$ and does the right thing if they're negative
(the ball is moving to e.g. top left). It also works if <code>a</code> is 0 and <code>b/a</code>
would fail as division by zero is undefined.</p>

<div class="box graybox"><p>Usually people like to put $x$ before $y$ in different kinds of places,
but <code>atan2</code> is used like <code>atan2(y_change, x_change)</code>, <b>not</b> like
<code>atan2(x_change, y_change)</code>.
</p>

</div><p>Finally, it's time to calculate our stuff:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span><span style="color: #007020; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">math</span> <span style="color: #007020; font-weight: bold">import</span> atan2
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>atan2(<span style="color: #40a070">10</span>, <span style="color: #40a070">20</span>)
<span style="color: #888888">0.4636476090008061</span>
</pre></div>
<h2 id="pythagorean-theorem">Pythagorean Theorem<a class="headerlink" href="#pythagorean-theorem" title="Link to this title">¶</a></h2><div class="box graybox"><h2> Problem</h2><p>The ball moves 10 pixels down and 20 pixels right, just like in
the previous problem. How many pixels is that in total, measured
diagonally?
</p>

</div><img width="171" height="121" class="asymptote" src="asymptote/b0297f3f2be1fdfad10c3e289a768634.svg" style="float:right;" /><p>Here's a handy equation, also known as the Pythagorean theorem:</p>

$$\begin{align}a^2 + b^2 = c^2
\end{align}$$<p>Again, the angle of the corner between a and b must be a quarter turn, like it
is in the image. We'll prove that this theorem actually works
<a href="more-geometry-and-trig.html#pythagorean-theorem-proof">later</a>.</p>

<p>Let's solve $c$ from the equation by applying $\sqrt{\ \ }$ on both sides:</p>

$$\begin{align}\sqrt{a^2 + b^2} = \sqrt{c^2} = |c| = c
\end{align}$$<p>Here $|c|$ is <a href="basics.html#absolute-value">the absolute value</a>. The last
step assumes $c \ge 0$, but that's not a problem because a triangle with
a negative side length doesn't make much sense.</p>

<p>"Hypotenuse" is a fancy word that means the longest side of a triangle with a
quarter-turn angle, and that's why some programming languages have a
<code>hypot(a, b)</code> function that returns $\sqrt{a^2 + b^2}$.</p>

<p>Let's calculate the distance:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span><span style="color: #007020; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">math</span> <span style="color: #007020; font-weight: bold">import</span> hypot, sqrt
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>hypot(<span style="color: #40a070">10</span>, <span style="color: #40a070">20</span>)
<span style="color: #888888">22.360679774997898</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>sqrt(<span style="color: #40a070">10</span><span style="color: #666666">**</span><span style="color: #40a070">2</span> <span style="color: #666666">+</span> <span style="color: #40a070">20</span><span style="color: #666666">**</span><span style="color: #40a070">2</span>)
<span style="color: #888888">22.360679774997898</span>
</pre></div>
<h2 id="vectors">Vectors<a class="headerlink" href="#vectors" title="Link to this title">¶</a></h2><img width="228" height="203" class="asymptote" src="asymptote/3ab1343d79c1ee771d20dcd1eeef5566.svg" style="float:right;" /><p>A point is simply a pair of x and y coordinates, and a vector represents the
difference between two points. For example, if we have the points $A=(1,2)$ and
$B=(3,5)$, the vector from $A$ to $B$ is
$\overrightarrow{AB} = (3-1) \bar i + (5-2) \bar j = 2 \bar i + 3 \bar j$. Here
$\bar i$ and $\bar j$ are vectors that go right and up by 1 unit, respectively.</p>

<p>A vector like $x \bar i + y \bar j$ can be also written as $<x,y>$. Use
whatever style you want.</p>

<p>We could also use vectors to do similar things as in
<a href="#trig-with-the-unit-circle">the unit circle trigonometry section</a>. The
advantage with vectors is that moving the ball is really easy:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>ball<span style="color: #666666">.</span>x <span style="color: #666666">+=</span> speed_vector<span style="color: #666666">.</span>x
ball<span style="color: #666666">.</span>y <span style="color: #666666">+=</span> speed_vector<span style="color: #666666">.</span>y
</pre></div>
<p>A disadvantage is that if we want to change the angle that the ball moves at
we can't just do <code>moving_angle += something</code>. We'll look into how this is
done in a moment.</p>

<img width="228" height="168" class="asymptote" src="asymptote/1d56d60ce083eb0e030b6b9149d03559.svg" style="float:right;" /><p>Another nice thing about vectors is that they can be +'ed together easily. For
example, if we first move 3 units to right, then 4 units up and finally 5 more
units to right, we move a total of 8 units to right and 4 units up. That's how
$3 \bar i + 4 \bar j + 5 \bar i = 8 \bar i + 4 \bar j$.</p>

<img width="201" height="228" class="asymptote" src="asymptote/f1eecbe789755b721714036a2053f479.svg" style="float:right;" /><p>These vector calculations are just like the
<a href="#pythagorean-theorem">Pythagorean theorem</a> and
<a href="#trig-with-the-unit-circle">unit circle trig</a> stuff above:</p>

$$\begin{align}
l &= \sqrt{a^2+b^2} = \text{hypot}(a, b) \\
t &= \text{atan2}(b,a) \\
a &= l \cdot \cos(t) \\
b &= l \cdot \sin(t)
\end{align}$$<p>Example: if we move 1 unit to the right and 2 units up, our vector is $<1,2>$,
its length is $\sqrt{1^2+2^2} = \sqrt 5 \approx 2.24$ and the angle is
$\text{atan2}(2,1) \approx 1.107$ radians. On the other hand,
$2.24 \cdot \cos(1.107) \approx 1$ and $2.24 \cdot \sin(1.107) \approx 2$.</p>

<p>One way to change the angle of a vector is to first convert it to a length and
an angle, change that angle and create a new vector. It looks like this in
pseudo-ish code:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>length <span style="color: #666666">=</span> hypot(speed_vector<span style="color: #666666">.</span>x, speed_vector<span style="color: #666666">.</span>y)
speed_vector<span style="color: #666666">.</span>x <span style="color: #666666">=</span> cos(new_angle) <span style="color: #666666">*</span> length
speed_vector<span style="color: #666666">.</span>y <span style="color: #666666">=</span> sin(new_angle) <span style="color: #666666">*</span> length
</pre></div>
<h3 id="example-vector-class-in-python">Example: Vector class in Python<a class="headerlink" href="#example-vector-class-in-python" title="Link to this title">¶</a></h3><p>Here's a <code>Vector</code> class I implemented in Python running with
<a href="https://repl.it/">repl.it</a>. A <code>Vector(x, y)</code> represents
$x \bar i + y \bar j$. I didn't add operator overloading because I wanted to
keep everything nice and simple. Click the "play"-shaped button at top to run
the code and then use the Python shell at right.</p>

<p><iframe frameborder="0" width="100%" height="800px" src="https://repl.it/MeIW"></iframe></p>

</div>
</body>
</html>
