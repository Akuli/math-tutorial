<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="style.css">
<title>Geometry and Trig</title>
</head>
<body>
<div id="content">
<div id="sidebar"><div class="sidebarblock"><h3>Chapters</h3><ul><li><a href="derivatives.html">Derivatives</a></li><li><a href="more-derivatives.html">More Derivatives</a></li><li><a href="integrals.html">Integrals</a></li><li><a href="more-integrals.html">More Integrals</a></li><li><b>Geometry and Trig</b></li><li><a href="more-geometry-and-trig.html">More Geometry and Trig</a></li><li><a href="explog.html">Exponent Functions and Logarithms</a></li><li><a href="taylor.html">Taylor Polynominals</a></li><li><a href="numbertheory.html">Number Theory</a></li></ul></div><div class="sidebarblock"><h3>Other stuff</h3><ul><li><a href="basics.html">The Basics</a></li><li><a href="graphs.html">Common Graphs</a></li><li><a href="summary.html">Summary</a></li></ul><h3><a href="index.html">Back to front page</a></h3></div></div>
<h1 id="geometry-and-trig">Geometry and Trig<a class="headerlink" href="#geometry-and-trig" title="Link to this title">¶</a></h1><p>This chapter contains useful stuff that aren't too difficult to get started
with. You'll find it especially useful if you like writing games, and this
chapter contains a working example game.</p>

<div class="box graybox"><h2> Note</h2><p>Usually the y axis is so that more y means up, but in this chapter it's
"upside down" and more y means down. Almost all programming things use the
"more y means down" version and are compatible with this chapter.</p>

<p>If you're a mathematician everything looks really weird to you, but if
you're a programmer who wants to get stuff done you'll enjoy not having to
add minus signs everywhere before using formulas from this tutorial.
</p>

</div><img class="asymptote" src="asymptote/8ddeb2c0e59514352b553bd5bb261ede.png" style="float:right; padding-left:5px;" /><img class="asymptote" src="asymptote/cdc74b2fa9923423f52862ac567ec8a5.png" style="float:right; padding-left:5px;" /><h2 id="radians-and-tau">Radians and Tau<a class="headerlink" href="#radians-and-tau" title="Link to this title">¶</a></h2><p>Angles are often measured in radians. The angles in the pictures at right are
both one radian. The angle is always 1 radian if the arc and radius lengths are
equal, and it doesn't matter what that length is.</p>

<img class="asymptote" src="asymptote/8b6ace74c6f849404001519f231b56a0.png" style="float:left; padding-right:20px;" /><p>If we try to fill a circle with these 1 radian slices, 6 of them fit and
there's some room left over. To be more precise, we can add 6.2831853...
slices. This number is called tau and written with the Greek tau letter <img class="inlinemath" src="math/a6f317b268ae825d94f832f970af607c.png" />.
So, a full turn is <img class="inlinemath" src="math/a6f317b268ae825d94f832f970af607c.png" /> radians. Be careful not to confuse <img class="inlinemath" src="math/a6f317b268ae825d94f832f970af607c.png" /> with other
letters like <img class="inlinemath" src="math/e358efa489f58062f10dd7316b65649e.png" />.</p>

<img class="asymptote" src="asymptote/b7f5f05a915a2557b2e86ee4bc94e875.png" style="float:right;" /><p>The yellow slice at right shows another way to define an angle in radians, and
it's compatible with the green slices because if we set <img class="inlinemath" src="math/225f9ff198eeedcb0c110f45fc7ef39f.png" /> the angle is
<img class="inlinemath" src="math/933a3fd95e03791593f4b932ae9e6e04.png" /> radian.</p>

<p>Sometimes the yellow slice definition is handier; for example, if we draw a
full circle we know the angle in the center is <img class="inlinemath" src="math/a6f317b268ae825d94f832f970af607c.png" /> radians (full turn), so
we get this:</p>

<img class="asymptote" src="asymptote/252e9ab0d34a1791201c03cbbbc8537e.png" style="float:right; margin: 0,0,0,20px;" /><p><img src="math/a650bf80b25a2fb8af7f8509c35136ca.png" class="blockmath" /></p><p>So we can multiply with tau to get from a radius to a perimeter. This is how
<img class="inlinemath" src="math/a6f317b268ae825d94f832f970af607c.png" /> is usually defined.</p>

<p>Some programming languages like new Pythons have a <code>tau</code> constant, but if
your favorite language doesn't, use <code>2*pi</code> instead. Here pi is the more
well-known circle constant <img class="inlinemath" src="math/475b5741d41195a162d7e7801bc4377f.png" />, and almost all
programming languages have something like <code>math.pi</code> or <code>Math.PI</code>. I find
<img class="inlinemath" src="math/a6f317b268ae825d94f832f970af607c.png" /> easier to work with than <img class="inlinemath" src="math/4f08e3dba63dc6d40b22952c7a9dac6d.png" /> because if I see <img class="inlinemath" src="math/3647dc184901b3ad134ff555024108f3.png" /> somewhere I
know immediately that it's a quarter turn, but <img class="inlinemath" src="math/d97ed75815d5454312793e69228fd04f.png" /> isn't as obvious. Of
course, you can use <img class="inlinemath" src="math/4f08e3dba63dc6d40b22952c7a9dac6d.png" /> if you prefer it over <img class="inlinemath" src="math/a6f317b268ae825d94f832f970af607c.png" />.
</p>

<h2 id="degrees">Degrees<a class="headerlink" href="#degrees" title="Link to this title">¶</a></h2><p>Degrees are an alternative to radians, and they work so that 360° is a full
turn. Here ° is the degree symbol, and 360 is just an arbitary number that
someone has chosen a long time ago.</p>

<p>If you need to convert between radians and degrees, use the fact that 360
degrees is <img class="inlinemath" src="math/a6f317b268ae825d94f832f970af607c.png" /> radians. Here's a Python example:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">degrees2radians</span>(degrees):
    <span style="color: #007020; font-weight: bold">return</span> degrees <span style="color: #666666">/</span> <span style="color: #40a070">360</span> <span style="color: #666666">*</span> math<span style="color: #666666">.</span>tau

<span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">radians2degrees</span>(radians):
    <span style="color: #007020; font-weight: bold">return</span> radians <span style="color: #666666">/</span> math<span style="color: #666666">.</span>tau <span style="color: #666666">*</span> <span style="color: #40a070">360</span>
</pre></div>
<p>Use <code>180</code> and <code>pi</code> instead of <code>360</code> and <code>tau</code> if your programming
language doesn't have a <code>tau</code> constant. You can also do something like
<code>TAU = 2*Math.PI</code>. Or better yet, some programming languages feature
conversion functions in standard libraries like Python's <code>math.radians()</code> and
<code>math.degrees()</code>.
</p>

<h2 id="basic-angle-stuff">Basic Angle Stuff<a class="headerlink" href="#basic-angle-stuff" title="Link to this title">¶</a></h2><div class="box graybox"><h2> Problem</h2><p>The ball of a ball-and-paddle game is moving at the angle of 0.5 radians
and it hits a wall at right. How should the angle change?</p>

<p><img class="asymptote" src="asymptote/762396cc0436e676b6d18a5e162ba9a8.png" /></p></div><p>Note that both angles are measured down from a horizontal line clockwise
because that's a standard in programming. In math, angles are usually measured
up from a horizontal line and counter-clockwise.</p>

<p>We can solve our problem by taking the 0.5 radian angle sign and moving it like
this:</p>

<p><img class="asymptote" src="asymptote/66ead1ba69afa6f7fd4384a24fb6b764.png" /></p><p>Now you can see that the angles add up to half turn, and that's <img class="inlinemath" src="math/2b52e395446666dd5ebf332001259749.png" />
radians, so we get this <a href="basics.html#equations">equation</a>:</p>

<p><img src="math/fad328e4f0bb66a5418acd0a5e122989.png" class="blockmath" /></p><p>I did the last step with Python.</p>

<p>In math it's common to use a letter instead of "???" to represent an
unknown value. For example:</p>

<p><img src="math/1075a9737ff7be0db6fb36c86b6f4252.png" class="blockmath" /></p><p>It's easy to calculate similar things for other directions. Here are the
results, where <img class="inlinemath" src="math/0cc175b9c0f1b6a831c399e269772661.png" /> is the original angle and <img class="inlinemath" src="math/92eb5ffee6ae2fec3ad71c777531578f.png" /> is the changed angle:</p>

<ul><li>If the ball hits left or right wall, <img class="inlinemath" src="math/57d4a791d72f1502550d0c837c92c177.png" />.</li><li>If the ball hits top or bottom, <img class="inlinemath" src="math/658652aa8bc08f987c23df9001a586d5.png" />.
</li></ul><p>Note that an angle like <img class="inlinemath" src="math/5d7b9adcbe1c629ec722529dd12e5129.png" /> radians is perfectly valid and equivalent to
<img class="inlinemath" src="math/37357323d0af5db8e5eb69171458fa43.png" /> radians. If you want to make sure that an angle is between <img class="inlinemath" src="math/cfcd208495d565ef66e7dff9f98764da.png" /> and
<img class="inlinemath" src="math/a6f317b268ae825d94f832f970af607c.png" />, use something like <code>angle % tau</code> where <code>%</code> is division remainder.
</p>

<h2 id="trig-with-the-unit-circle">Trig with the Unit Circle<a class="headerlink" href="#trig-with-the-unit-circle" title="Link to this title">¶</a></h2><div class="box graybox"><h2> Problem</h2><p>This time the ball moves at the angle of <img class="inlinemath" src="math/b84e0e7637d5e7f281ef242393364464.png" />, and it should move 5
pixels every time the screen is updated. How many pixels should its x and y
change every time?</p>

<p><img class="asymptote" src="asymptote/4a7581f74964581b28a0ae41c546e168.png" /></p></div><p>Our problem has something to do with sine and cosine. The unit circle is a
circle with radius 1 placed in the middle of the xy plane. Here's a picture that
shows what sine and cosine are:</p>

<p><img class="asymptote" src="asymptote/e8d8ed1cc6f73ba506522bdb94e15ab4.png" /></p><p>This is really simple: the x coordinate is <img class="inlinemath" src="math/4d3eb39ad6e06c939af4dee7de899759.png" /> and the y coordinate is
<img class="inlinemath" src="math/5732d78efedc927ac0d505b0b839d142.png" />. But the radius of the unit circle is 1 instead of our 5, so we need
to multiply everything by 5 to scale it up. We get this:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>ball<span style="color: #666666">.</span>x <span style="color: #666666">+=</span> <span style="color: #40a070">5</span><span style="color: #666666">*</span>cos(tau<span style="color: #666666">/</span><span style="color: #40a070">6</span>)
ball<span style="color: #666666">.</span>y <span style="color: #666666">+=</span> <span style="color: #40a070">5</span><span style="color: #666666">*</span>sin(tau<span style="color: #666666">/</span><span style="color: #40a070">6</span>)
</pre></div>
<p>Note that <code>cos()</code> and <code>sin()</code> functions use radians by default in almost
all programming languages. Let's try this out with Python just to make sure
that everything works:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span><span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">math</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>math<span style="color: #666666">.</span>sin(math<span style="color: #666666">.</span>tau<span style="color: #666666">/</span><span style="color: #40a070">6</span>)
<span style="color: #888888">0.8660254037844386</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>math<span style="color: #666666">.</span>cos(math<span style="color: #666666">.</span>tau<span style="color: #666666">/</span><span style="color: #40a070">6</span>)
<span style="color: #888888">0.5000000000000001</span>
</pre></div>
<p>These results make sense because the angle <img class="inlinemath" src="math/e358efa489f58062f10dd7316b65649e.png" /> in the above image looks like
it's about a sixth of a turn (or <img class="inlinemath" src="math/b84e0e7637d5e7f281ef242393364464.png" />), so <img class="inlinemath" src="math/18181cefaa890d68e04d3e0bf9ade269.png" /> should be close
to 1 because the circle's bottom is at <img class="inlinemath" src="math/6a267007228f9f654a0d28dec6932c31.png" />. Similarly, the <img class="inlinemath" src="math/4d3eb39ad6e06c939af4dee7de899759.png" /> marked on
the picture seems to be about half of the radius, and the radius is 1.</p>

<p id="accurate-sincos"><code>0.5000000000000001</code> is obviously not an accurate result, but it's good
enough for a programmer while a mathematician would say that
<img class="inlinemath" src="math/faf62faf63c9230b053418e2c50aed72.png" /> and <img class="inlinemath" src="math/a14f75514bf5c4ac763edffa16a80bf2.png" />.
See <a href="more-geometry-and-trig.html#accurate-sine-and-cosine-values">this thing</a> if
you're wondering how I came up with these values.
</p>

<h2 id="example-ball-and-paddle">Example: Ball and Paddle<a class="headerlink" href="#example-ball-and-paddle" title="Link to this title">¶</a></h2><p>Here's a minimal game written with my <a href="https://github.com/Akuli/math-tutorial/blob/master/canvaswrapper.js">canvaswrapper.js</a> script that
demonstrates most things we have learned so far. Click it, press arrow up to
start the game and then use arrow keys to move the paddle.</p>

<script type="text/javascript" src="canvaswrapper.js"></script><canvas id="canvas1" width="600" height="400" tabindex="1"></canvas><script>var screen = new CanvasWrapper('canvas1');

const TAU = Math.PI*2;

var paddle = {
  length: 200,
  thickness: 15,
  speed: 10,
  movement: 0,             // -1 means left, 0 means right
};
paddle.top = screen.height - paddle.thickness;

var ball = {
  radius: 10,
  speed: 10,
  moving: false,
};

function resetGame() {
  paddle.centerx = screen.width/2;
  ball.centerx = screen.width/2;
  ball.centery = screen.height-paddle.thickness-ball.radius;
  ball.angle = 0.75*TAU;
  ball.moving = false;
}

resetGame();
runRepeatedly(function() {
  screen.fill('black');
  screen.drawRectangle(
    paddle.centerx-paddle.length/2, screen.height-paddle.thickness,
    paddle.length, paddle.thickness, '#00ff00');
  screen.drawCircle(ball.centerx, ball.centery, ball.radius, 'white');

  if (ball.moving) {
    if (ball.centery > screen.height) {
      resetGame();
      return;
    }

    ball.centerx += ball.speed * Math.cos(ball.angle);
    ball.centery += ball.speed * Math.sin(ball.angle);

    if (ball.centerx < ball.radius) {     // bumps left wall
      ball.angle = TAU/2 - ball.angle;
      ball.centerx = ball.radius;
    } else if (ball.centerx > screen.width-ball.radius) {   // right wall
      ball.angle = TAU/2 - ball.angle;
      ball.centerx = screen.width-ball.radius;
    } else if (ball.centery < ball.radius) {          // top
      ball.angle = TAU - ball.angle;
      ball.centery = ball.radius;
    } else if (ball.centery > screen.height-paddle.thickness-ball.radius) {
      // paddle?
      paddleLeft = paddle.centerx - paddle.length/2;
      paddleRight = paddle.centerx + paddle.length/2;
      if (paddleLeft < ball.centerx && ball.centerx < paddleRight) {
        // yes, it hits the paddle
        ball.angle = TAU - ball.angle;
        ball.centery = screen.height-paddle.thickness-ball.radius;

        // also adjust the angle depending on which side of the paddle the
        // ball hits
        ball.angle += (ball.centerx - paddle.centerx) / 100;
      }
    }
    paddle.centerx += paddle.movement*paddle.speed;
  }

  screen.getEvents().forEach(evt => {
    if (evt.type == 'keydown') {
      if (ball.moving) {
        if (evt.key == 'ArrowLeft') {
          paddle.movement = -1;
        } else if (evt.key == 'ArrowRight') {
          paddle.movement = 1;
        }
      } else {
        if (evt.key == 'ArrowUp') {
          ball.moving = true;
          return;
        }
      }
    } else if (evt.type == 'keyup' && (
          (evt.key == 'ArrowLeft' && paddle.movement == -1) ||
          (evt.key == 'ArrowRight' && paddle.movement == 1))) {
      // cancel the previous ArrowLeft or ArrowRight press
      paddle.movement = 0;
    }
  });
});
</script><p>Here's the code:</p><div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #007020; font-weight: bold">var</span> screen <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">new</span> CanvasWrapper(<span style="color: #4070a0">&#39;canvas1&#39;</span>);

<span style="color: #007020; font-weight: bold">const</span> TAU <span style="color: #666666">=</span> <span style="color: #007020">Math</span>.PI<span style="color: #666666">*</span><span style="color: #40a070">2</span>;

<span style="color: #007020; font-weight: bold">var</span> paddle <span style="color: #666666">=</span> {
  length<span style="color: #666666">:</span> <span style="color: #40a070">200</span>,
  thickness<span style="color: #666666">:</span> <span style="color: #40a070">15</span>,
  speed<span style="color: #666666">:</span> <span style="color: #40a070">10</span>,
  movement<span style="color: #666666">:</span> <span style="color: #40a070">0</span>,             <span style="color: #60a0b0; font-style: italic">// -1 means left, 0 means right</span>
};
paddle.top <span style="color: #666666">=</span> screen.height <span style="color: #666666">-</span> paddle.thickness;

<span style="color: #007020; font-weight: bold">var</span> ball <span style="color: #666666">=</span> {
  radius<span style="color: #666666">:</span> <span style="color: #40a070">10</span>,
  speed<span style="color: #666666">:</span> <span style="color: #40a070">10</span>,
  moving<span style="color: #666666">:</span> <span style="color: #007020; font-weight: bold">false</span>,
};

<span style="color: #007020; font-weight: bold">function</span> resetGame() {
  paddle.centerx <span style="color: #666666">=</span> screen.width<span style="color: #666666">/</span><span style="color: #40a070">2</span>;
  ball.centerx <span style="color: #666666">=</span> screen.width<span style="color: #666666">/</span><span style="color: #40a070">2</span>;
  ball.centery <span style="color: #666666">=</span> screen.height<span style="color: #666666">-</span>paddle.thickness<span style="color: #666666">-</span>ball.radius;
  ball.angle <span style="color: #666666">=</span> <span style="color: #40a070">0.75</span><span style="color: #666666">*</span>TAU;
  ball.moving <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">false</span>;
}

resetGame();
runRepeatedly(<span style="color: #007020; font-weight: bold">function</span>() {
  screen.fill(<span style="color: #4070a0">&#39;black&#39;</span>);
  screen.drawRectangle(
    paddle.centerx<span style="color: #666666">-</span>paddle.length<span style="color: #666666">/</span><span style="color: #40a070">2</span>, screen.height<span style="color: #666666">-</span>paddle.thickness,
    paddle.length, paddle.thickness, <span style="color: #4070a0">&#39;#00ff00&#39;</span>);
  screen.drawCircle(ball.centerx, ball.centery, ball.radius, <span style="color: #4070a0">&#39;white&#39;</span>);

  <span style="color: #007020; font-weight: bold">if</span> (ball.moving) {
    <span style="color: #007020; font-weight: bold">if</span> (ball.centery <span style="color: #666666">&gt;</span> screen.height) {
      resetGame();
      <span style="color: #007020; font-weight: bold">return</span>;
    }

    ball.centerx <span style="color: #666666">+=</span> ball.speed <span style="color: #666666">*</span> <span style="color: #007020">Math</span>.cos(ball.angle);
    ball.centery <span style="color: #666666">+=</span> ball.speed <span style="color: #666666">*</span> <span style="color: #007020">Math</span>.sin(ball.angle);

    <span style="color: #007020; font-weight: bold">if</span> (ball.centerx <span style="color: #666666">&lt;</span> ball.radius) {     <span style="color: #60a0b0; font-style: italic">// bumps left wall</span>
      ball.angle <span style="color: #666666">=</span> TAU<span style="color: #666666">/</span><span style="color: #40a070">2</span> <span style="color: #666666">-</span> ball.angle;
      ball.centerx <span style="color: #666666">=</span> ball.radius;
    } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (ball.centerx <span style="color: #666666">&gt;</span> screen.width<span style="color: #666666">-</span>ball.radius) {   <span style="color: #60a0b0; font-style: italic">// right wall</span>
      ball.angle <span style="color: #666666">=</span> TAU<span style="color: #666666">/</span><span style="color: #40a070">2</span> <span style="color: #666666">-</span> ball.angle;
      ball.centerx <span style="color: #666666">=</span> screen.width<span style="color: #666666">-</span>ball.radius;
    } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (ball.centery <span style="color: #666666">&lt;</span> ball.radius) {          <span style="color: #60a0b0; font-style: italic">// top</span>
      ball.angle <span style="color: #666666">=</span> TAU <span style="color: #666666">-</span> ball.angle;
      ball.centery <span style="color: #666666">=</span> ball.radius;
    } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (ball.centery <span style="color: #666666">&gt;</span> screen.height<span style="color: #666666">-</span>paddle.thickness<span style="color: #666666">-</span>ball.radius) {
      <span style="color: #60a0b0; font-style: italic">// paddle?</span>
      paddleLeft <span style="color: #666666">=</span> paddle.centerx <span style="color: #666666">-</span> paddle.length<span style="color: #666666">/</span><span style="color: #40a070">2</span>;
      paddleRight <span style="color: #666666">=</span> paddle.centerx <span style="color: #666666">+</span> paddle.length<span style="color: #666666">/</span><span style="color: #40a070">2</span>;
      <span style="color: #007020; font-weight: bold">if</span> (paddleLeft <span style="color: #666666">&lt;</span> ball.centerx <span style="color: #666666">&amp;&amp;</span> ball.centerx <span style="color: #666666">&lt;</span> paddleRight) {
        <span style="color: #60a0b0; font-style: italic">// yes, it hits the paddle</span>
        ball.angle <span style="color: #666666">=</span> TAU <span style="color: #666666">-</span> ball.angle;
        ball.centery <span style="color: #666666">=</span> screen.height<span style="color: #666666">-</span>paddle.thickness<span style="color: #666666">-</span>ball.radius;

        <span style="color: #60a0b0; font-style: italic">// also adjust the angle depending on which side of the paddle the</span>
        <span style="color: #60a0b0; font-style: italic">// ball hits</span>
        ball.angle <span style="color: #666666">+=</span> (ball.centerx <span style="color: #666666">-</span> paddle.centerx) <span style="color: #666666">/</span> <span style="color: #40a070">100</span>;
      }
    }
    paddle.centerx <span style="color: #666666">+=</span> paddle.movement<span style="color: #666666">*</span>paddle.speed;
  }

  screen.getEvents().forEach(evt =&gt; {
    <span style="color: #007020; font-weight: bold">if</span> (evt.type <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;keydown&#39;</span>) {
      <span style="color: #007020; font-weight: bold">if</span> (ball.moving) {
        <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowLeft&#39;</span>) {
          paddle.movement <span style="color: #666666">=</span> <span style="color: #666666">-</span><span style="color: #40a070">1</span>;
        } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowRight&#39;</span>) {
          paddle.movement <span style="color: #666666">=</span> <span style="color: #40a070">1</span>;
        }
      } <span style="color: #007020; font-weight: bold">else</span> {
        <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowUp&#39;</span>) {
          ball.moving <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">true</span>;
          <span style="color: #007020; font-weight: bold">return</span>;
        }
      }
    } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (evt.type <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;keyup&#39;</span> <span style="color: #666666">&amp;&amp;</span> (
          (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowLeft&#39;</span> <span style="color: #666666">&amp;&amp;</span> paddle.movement <span style="color: #666666">==</span> <span style="color: #666666">-</span><span style="color: #40a070">1</span>) <span style="color: #666666">||</span>
          (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowRight&#39;</span> <span style="color: #666666">&amp;&amp;</span> paddle.movement <span style="color: #666666">==</span> <span style="color: #40a070">1</span>))) {
      <span style="color: #60a0b0; font-style: italic">// cancel the previous ArrowLeft or ArrowRight press</span>
      paddle.movement <span style="color: #666666">=</span> <span style="color: #40a070">0</span>;
    }
  });
});
</pre></div>
<h2 id="trig-with-a-triangle">Trig with a Triangle<a class="headerlink" href="#trig-with-a-triangle" title="Link to this title">¶</a></h2><div class="box graybox"><h2> Problem</h2><p>The ball moves 10 pixels down and 20 pixels right. What angle is that?
</p>

</div><p>Here's another way to define <img class="inlinemath" src="math/5912fc1251cd0c1e212f6dd8d19f17ef.png" /> and <img class="inlinemath" src="math/8effff999de692c242b9f7a539c63e58.png" />, and another function called
<img class="inlinemath" src="math/b00c5bd0cdc3e9432babf4fb3512b848.png" /> that we haven't used before.</p>

<img class="asymptote" src="asymptote/74cbd34ca0945193971abf3e99d5ee37.png" style="float:right;" /><p><img src="math/e9b648bac7a9f99ffea6fa6759ba44ab.png" class="blockmath" /></p><p>We'll talk about compatibility with the unit circle definitions
<a href="more-geometry-and-trig.html#unit-circle-or-triangle">later</a>. These things work
only if the triangle has an angle that is exactly a quarter turn, and the little
box at bottom right means just that.</p>

<img class="asymptote" src="asymptote/d5c920cd486e0028f282af6184cb91d1.png" style="float:right;" /><p>The green triangle is just like the blue one, but I flipped it so that we can
calculate the stuff by plugging in <img class="inlinemath" src="math/fef27623febd2ae03afe7a22d034ac5b.png" /> and <img class="inlinemath" src="math/0daca570410e633ef534e720f5d54852.png" /> without worrying about
which way things go. Let's figure out how to calculate the <img class="inlinemath" src="math/e358efa489f58062f10dd7316b65649e.png" />:</p>

<p><img src="math/cd2abafe01cfb485050cf9223573f78d.png" class="blockmath" /></p><p>Here <img class="inlinemath" src="math/88ff4a6f25e9a1675fc702f8ee41a28a.png" /> is the inverse of <img class="inlinemath" src="math/b00c5bd0cdc3e9432babf4fb3512b848.png" />, so <img class="inlinemath" src="math/4ed921efd32595a9cbd97f70f42ff237.png" />. Most
programming languages have an <code>atan(x)</code> function that returns <img class="inlinemath" src="math/be0e21a53d044912466e8b6663cdb405.png" />,
but I don't recommend using it in this case; the <code>atan2(b,a)</code> function
returns <img class="inlinemath" src="math/4612b7103d7c30a41904296a605f431e.png" /> and I recommend it instead. <code>atan2</code> looks at the
signs of <img class="inlinemath" src="math/0cc175b9c0f1b6a831c399e269772661.png" /> and <img class="inlinemath" src="math/92eb5ffee6ae2fec3ad71c777531578f.png" /> and does the right thing if they're negative (the ball is
moving to e.g. top left). It also works if <code>a</code> is 0 and <code>b/a</code> would fail as
division by zero is undefined.</p>

<div class="box graybox"><p>Usually people like to put <img class="inlinemath" src="math/9dd4e461268c8034f5c8564e155c67a6.png" /> before <img class="inlinemath" src="math/415290769594460e2e485922904f345d.png" /> in different kinds of places,
but <code>atan2</code> is used like <code>atan2(y_change, x_change)</code>, <b>not</b> like
<code>atan2(x_change, y_change)</code>.
</p>

</div><p>Finally, it's time to calculate our stuff:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span><span style="color: #007020; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">math</span> <span style="color: #007020; font-weight: bold">import</span> atan2
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>atan2(<span style="color: #40a070">10</span>, <span style="color: #40a070">20</span>)
<span style="color: #888888">0.4636476090008061</span>
</pre></div>
<h2 id="pythagorean-theorem">Pythagorean Theorem<a class="headerlink" href="#pythagorean-theorem" title="Link to this title">¶</a></h2><div class="box graybox"><h2> Problem</h2><p>The ball moves 10 pixels down and 20 pixels right, just like in
the previous problem. How many pixels is that in total, measured
diagonally?
</p>

</div><img class="asymptote" src="asymptote/b0297f3f2be1fdfad10c3e289a768634.png" style="float:right;" /><p>Here's a handy equation, also known as the Pythagorean theorem:</p>

<p><img src="math/f98fde5a8a2f14e625eb5fceed7050ee.png" class="blockmath" /></p><p>Again, the angle of the corner between a and b must be a quarter turn, like it
is in the image. We'll prove that this theorem actually works
<a href="more-geometry-and-trig.html#pythagorean-theorem-proof">later</a>.</p>

<p>Let's solve <img class="inlinemath" src="math/4a8a08f09d37b73795649038408b5f33.png" /> from the equation by applying <img class="inlinemath" src="math/da175f00ddc2ba16792669e37fdd4b4b.png" /> on both sides:</p>

<p><img src="math/18e0903219269d504f9da35b9a87b654.png" class="blockmath" /></p><p>Here <img class="inlinemath" src="math/8479cef10a03961354aa94cb0b522dc9.png" /> is <a href="basics.html#absolute-value">the absolute value</a>. The last
step assumes <img class="inlinemath" src="math/3f42f9a2cf87ec23780682aa5d81f95d.png" />, but that's not a problem because a triangle with
a negative side length doesn't make much sense.</p>

<p>"Hypotenuse" is a fancy word that means the longest side of a triangle with a
quarter-turn angle, and that's why some programming languages have a
<code>hypot(a, b)</code> function that returns <img class="inlinemath" src="math/49a12ba4c3e7dcb2a56081b67324dc91.png" />.</p>

<p>Let's calculate the distance:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span><span style="color: #007020; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">math</span> <span style="color: #007020; font-weight: bold">import</span> hypot, sqrt
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>hypot(<span style="color: #40a070">10</span>, <span style="color: #40a070">20</span>)
<span style="color: #888888">22.360679774997898</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>sqrt(<span style="color: #40a070">10</span><span style="color: #666666">**</span><span style="color: #40a070">2</span> <span style="color: #666666">+</span> <span style="color: #40a070">20</span><span style="color: #666666">**</span><span style="color: #40a070">2</span>)
<span style="color: #888888">22.360679774997898</span>
</pre></div>
<h2 id="vectors">Vectors<a class="headerlink" href="#vectors" title="Link to this title">¶</a></h2><img class="asymptote" src="asymptote/3ab1343d79c1ee771d20dcd1eeef5566.png" style="float:right;" /><p>A point is simply a pair of x and y coordinates, and a vector represents the
difference between two points. For example, if we have the points <img class="inlinemath" src="math/ea55273b1ce070424fbe13c45d6270c9.png" /> and
<img class="inlinemath" src="math/ef624b5778b8523126644acae2e90d0c.png" />, the vector from <img class="inlinemath" src="math/7fc56270e7a70fa81a5935b72eacbe29.png" /> to <img class="inlinemath" src="math/9d5ed678fe57bcca610140957afab571.png" /> is
<img class="inlinemath" src="math/161e1a0aca6f0798cf541fd74161b09c.png" />. Here
<img class="inlinemath" src="math/c507cd1c30750bac21069bcca5228874.png" /> and <img class="inlinemath" src="math/566c5d57c8c3f63e6ad9e818677f2ef3.png" /> are vectors that go right and up by 1 unit, respectively.</p>

<p>A vector like <img class="inlinemath" src="math/1b04e810f0960954248ec7142498f38e.png" /> can be also written as <img class="inlinemath" src="math/b7c2a05d0e6220189f3a032840d30b44.png" />. Use
whatever style you want.</p>

<p>We could also use vectors to do similar things as in
<a href="#trig-with-the-unit-circle">the unit circle trigonometry section</a>. The
advantage with vectors is that moving the ball is really easy:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>ball<span style="color: #666666">.</span>x <span style="color: #666666">+=</span> speed_vector<span style="color: #666666">.</span>x
ball<span style="color: #666666">.</span>y <span style="color: #666666">+=</span> speed_vector<span style="color: #666666">.</span>y
</pre></div>
<p>A disadvantage is that if we want to change the angle that the ball moves at
we can't just do <code>moving_angle += something</code>. We'll look into how this is
done in a moment.</p>

<img class="asymptote" src="asymptote/1d56d60ce083eb0e030b6b9149d03559.png" style="float:right;" /><p>Another nice thing about vectors is that they can be +'ed together easily. For
example, if we first move 3 units to right, then 4 units up and finally 5 more
units to right, we move a total of 8 units to right and 4 units up. That's how
<img class="inlinemath" src="math/cfaeccd8b035e766aa99ee8a95b2719b.png" />.</p>

<img class="asymptote" src="asymptote/f1eecbe789755b721714036a2053f479.png" style="float:right;" /><p>These vector calculations are just like the
<a href="#pythagorean-theorem">Pythagorean theorem</a> and
<a href="#trig-with-the-unit-circle">unit circle trig</a> stuff above:</p>

<p><img src="math/ccaccaa962d9dde2f078aa821adbc811.png" class="blockmath" /></p><p>Example: if we move 1 unit to the right and 2 units up, our vector is <img class="inlinemath" src="math/10adba9a4d1293648444f90c1f98f4af.png" />,
its length is <img class="inlinemath" src="math/bd11a1b602bc901206b5050eb613ad94.png" /> and the angle is
<img class="inlinemath" src="math/065b95059e37aefbd526a727abb61ae0.png" /> radians. On the other hand,
<img class="inlinemath" src="math/90c34faac4edd32a19eed1985f8bdf4b.png" /> and <img class="inlinemath" src="math/b8618aaaf743919e595ba22376c872c0.png" />.</p>

<p>One way to change the angle of a vector is to first convert it to a length and
an angle, change that angle and create a new vector. It looks like this in
pseudo-ish code:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>length <span style="color: #666666">=</span> hypot(speed_vector<span style="color: #666666">.</span>x, speed_vector<span style="color: #666666">.</span>y)
speed_vector<span style="color: #666666">.</span>x <span style="color: #666666">=</span> cos(new_angle) <span style="color: #666666">*</span> length
speed_vector<span style="color: #666666">.</span>y <span style="color: #666666">=</span> sin(new_angle) <span style="color: #666666">*</span> length
</pre></div>
<h3 id="example-vector-class-in-python">Example: Vector class in Python<a class="headerlink" href="#example-vector-class-in-python" title="Link to this title">¶</a></h3><p>Here's a <code>Vector</code> class I implemented in Python running with
<a href="https://repl.it/">repl.it</a>. A <code>Vector(x, y)</code> represents
<img class="inlinemath" src="math/1b04e810f0960954248ec7142498f38e.png" />. I didn't add operator overloading because I wanted to
keep everything nice and simple. Click the "play"-shaped button at top to run
the code and then use the Python shell at right.</p>

<p><iframe frameborder="0" width="100%" height="800px" src="https://repl.it/MeIW"></iframe></p>

</div>
</body>
</html>
