
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Geometry and Trigonometry</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Derivatives" href="derivatives.html" />
    <link rel="prev" title="The Basics" href="basics.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="geometry-and-trigonometry">
<h1>Geometry and Trigonometry<a class="headerlink" href="#geometry-and-trigonometry" title="Permalink to this headline">¶</a></h1>
<p>This chapter contains useful stuff that aren’t too difficult to get started
with. You’ll find it especially useful if you like writing games, and this
chapter contains a working example game.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Usually the y axis is so that more y means up, but in this chapter, it’s
“upside down” and more y means down. Almost all programming things use the
“more y means down” version and are compatible with this chapter.</p>
<p class="last">If you’re a mathematician everything looks really weird to you, but if
you’re a programmer who wants to get stuff done you’ll enjoy not having to
add minus signs everywhere before using formulas from this tutorial.</p>
</div>
<div class="section" id="basic-angle-stuff">
<h2>Basic Angle Stuff<a class="headerlink" href="#basic-angle-stuff" title="Permalink to this headline">¶</a></h2>
<div class="admonition-problem admonition">
<p class="first admonition-title">Problem</p>
<p>The ball of a ball-and-paddle game is moving at the angle of 30° and
it hits a wall at right. How should the angle change?</p>
<div class="last i">
<p><img src="_images/asymptote/fb5caa08ab3bb76c401727fc545b99c1.png"/></p></div></div>
<p>Here ° is the degree sign, and 30° means 30 degrees. Degrees work so
that 360° is a full turn, 180° is a half turn, 90° is a quarter and so
on. It’s also possible to measure angles in radians, but we’ll look into
that later.</p>
<p>Note that both angles are measured down from a horizontal line clockwise
because that’s a standard in programming. In math, angles are usually measured
up from a horizontal line and counter-clockwise.</p>
<p>We can solve our problem by taking the 30° angle sign and moving it like
this:</p>
<div class="i">
<p><img src="_images/asymptote/2db2cd72682df006917dbeb4a3cea209.png"/></p></div><p>Now you can see that the angles add up to half turn (or 180°), so we get
this <a class="reference internal" href="basics.html#equations"><span class="std std-ref">equation</span></a>:</p>
<div class="math">
<p><img src="_images/math/33723e63a81285a59a24e3f0ff8a57d709f397db.png" alt="30° + \text{???} &amp;= 180° \\
\text{???} &amp;= 180° - 30° \\
\text{???} &amp;= 150°"/></p>
</div><p>In math it’s common to use a letter instead of “???” to represent an
unknown value. For example:</p>
<div class="math">
<p><img src="_images/math/2421789fcd230f1cee643c7e33ff5ee6da0aa308.png" alt="30° + b &amp;= 180° \\
b &amp;= 180° - 30° = 150°"/></p>
</div><p>It’s easy to calculate similar things for other directions. Here are the
results, where <img class="math" src="_images/math/bd9d9c7512c898e0a254a0882184197bc1bd9c9f.png" alt="a"/> is the original angle and <img class="math" src="_images/math/57c9d14bb082716df9000146882ce365335d08f1.png" alt="b"/> is the changed angle:</p>
<ul class="simple">
<li>If the ball hits left or right wall, <img class="math" src="_images/math/8c33ce59f7e5ac43c7703f790cd35277520b2be8.png" alt="b = 180°-a"/>.</li>
<li>If the ball hits top or bottom, <img class="math" src="_images/math/89a322ef941e98da25d5877abb2ca7f20687d07e.png" alt="b = 360°-a"/>.</li>
</ul>
</div>
<div class="section" id="trig-aka-trigonometry-with-the-unit-circle">
<span id="unitcircletrig"></span><h2>Trig (aka trigonometry) with the Unit Circle<a class="headerlink" href="#trig-aka-trigonometry-with-the-unit-circle" title="Permalink to this headline">¶</a></h2>
<div class="admonition-problem admonition">
<p class="first admonition-title">Problem</p>
<p>This time the ball moves at the angle of 60°, and it should move 5 pixels
every time the screen is updated. How many pixels should its x and y change
every second?</p>
<div class="last i">
<p><img src="_images/asymptote/94a716379dba47176a7edddf0f7117ef.png"/></p></div></div>
<p>Our problem has something to do with sine and cosine. The unit circle is a
circle with radius 1 placed in the middle of the xy plane. Here’s a picture that
shows what sine and cosine are:</p>
<div class="i">
<p><img src="_images/asymptote/466bfe7e473a2186df03f7b1487de347.png"/></p></div><p>This is really simple: the x coordinate is <img class="math" src="_images/math/3cd71feb124c0caec58a46de8daa035523d8af90.png" alt="\cos t"/> and the y coordinate is
<img class="math" src="_images/math/fbee44673e644df2dfabeb625ffd88a8a0a0a6ac.png" alt="\sin t"/>. But the radius of the unit circle is 1 instead of our 5, so we need
to multiply everything by 5 to scale it up. We get this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">5</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
<span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">5</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
<p>The angle <img class="math" src="_images/math/5ec053cf70dc1c98cc297322250569eda193e7a4.png" alt="t"/> in the above image looks like it’s about 60°, so <img class="math" src="_images/math/b90d86fb7e9545c4276e55a72ae6362d975e142d.png" alt="\sin 60°"/>
should be somewhere between 0 and 1 since the height of the x axis is 0 and the
circle’s bottom is at <img class="math" src="_images/math/2b834b23cee7309ea7a9ea5fcedf9f258875c702.png" alt="y=1"/>. But if we try this out in Python, something is
wrong:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
<span class="go">-0.3048106211022167</span>
</pre></div>
</div>
<p>The problem is that Python, Haskell, C and most other programming languages use
radians by default instead of degrees. Let’s convert 60° to radians so
<code class="docutils literal"><span class="pre">math.sin</span></code> is happy:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">60</span><span class="p">))</span>
<span class="go">0.8660254037844386</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">60</span><span class="p">))</span>
<span class="go">0.5000000000000001</span>
</pre></div>
</div>
<p>That’s more like it. <code class="docutils literal"><span class="pre">0.5000000000000001</span></code> is obviously not an accurate
result, but it’s good enough for a programmer while a mathematician would say
that <img class="math" src="_images/math/6e1490ba27369c4df406cbdd210f1c8684c44b30.png" alt="\sin 60° = \frac{\sqrt 3}2"/> and <img class="math" src="_images/math/453177a40323026da8b50cc4749aa5e55aa75614.png" alt="\cos 60° = \frac 1 2"/>. I might write
more about how the heck I came up with those mathy-accurate values some day.</p>
<p>In most programming languages, functions like <code class="docutils literal"><span class="pre">sin</span></code> and <code class="docutils literal"><span class="pre">cos</span></code> take radians
as arguments, but also note that some functions (like <code class="docutils literal"><span class="pre">atan2</span></code>, see
<a class="reference internal" href="#trig-with-a-triangle">Trig with a Triangle</a> below) return radians.</p>
<p>If your favorite programming language doesn’t come with handy <code class="docutils literal"><span class="pre">radians()</span></code> and
<code class="docutils literal"><span class="pre">degrees()</span></code> functions you can define your own. Here’s a JavaScript example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">toRadians</span><span class="p">(</span><span class="nx">degrees</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">degrees</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">180</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">toDegrees</span><span class="p">(</span><span class="nx">radians</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">radians</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="explanations.html#radians"><span class="std std-ref">the explanation</span></a> if you’re wondering how these functions work.</p>
</div>
<div class="section" id="example-ball-and-paddle">
<h2>Example: Ball and Paddle<a class="headerlink" href="#example-ball-and-paddle" title="Permalink to this headline">¶</a></h2>
<p>Here’s a minimal game written with my <a class="reference external" href="https://github.com/Akuli/math-tutorial/blob/master/jsdemo-setup/canvaswrapper.js">canvaswrapper.js</a> script that
demonstrates most things we have learned so far. Click it, press arrow up to
start the game and then use arrow keys to move the paddle.</p>
<div class="i">

    <script type="text/javascript" src="canvaswrapper.js"></script>
    <canvas id="canvas1" width="600" height="400" tabindex="1"></canvas>
    <script>var screen = new CanvasWrapper('canvas1');

var paddle = {
  length: 200,
  thickness: 15,
  speed: 10,
  movement: 0,             // -1 means left, 0 means right
};
paddle.top = screen.height - paddle.thickness;

var ball = {
  radius: 10,
  speed: 10,
  moving: false,
};

function toRadians(degrees) {
  return degrees*Math.PI/180;
}

function resetGame() {
  paddle.centerx = screen.width/2;
  ball.centerx = screen.width/2;
  ball.centery = screen.height-paddle.thickness-ball.radius;
  ball.angle = 270;
  ball.moving = false;
}

resetGame();
runRepeatedly(function() {
  screen.fill('black');
  screen.drawRectangle(
    paddle.centerx-paddle.length/2, screen.height-paddle.thickness,
    paddle.length, paddle.thickness, '#00ff00');
  screen.drawCircle(ball.centerx, ball.centery, ball.radius, 'white');

  if (ball.moving) {
    if (ball.centery > screen.height) {
      resetGame();
      return;
    }

    ball.centerx += ball.speed * Math.cos(toRadians(ball.angle));
    ball.centery += ball.speed * Math.sin(toRadians(ball.angle));

    if (ball.centerx < ball.radius) {     // bumps left wall
      ball.angle = 180-ball.angle;
      ball.centerx = ball.radius;
    } else if (ball.centerx > screen.width-ball.radius) {   // right wall
      ball.angle = 180-ball.angle;
      ball.centerx = screen.width-ball.radius;
    } else if (ball.centery < ball.radius) {          // top
      ball.angle = 360-ball.angle;
      ball.centery = ball.radius;
    } else if (ball.centery > screen.height-paddle.thickness-ball.radius) {
      // paddle?
      paddleLeft = paddle.centerx - paddle.length/2;
      paddleRight = paddle.centerx + paddle.length/2;
      if (paddleLeft < ball.centerx && ball.centerx < paddleRight) {
        // yes, it hits the paddle
        ball.angle = 360 - ball.angle;
        ball.centery = screen.height-paddle.thickness-ball.radius;

        // also adjust the angle depending on which side of the paddle the
        // ball hits
        ball.angle += (ball.centerx - paddle.centerx) / 2;
      }
    }
    paddle.centerx += paddle.movement*paddle.speed;
  }

  screen.getEvents().forEach(evt => {
    if (evt.type == 'keydown') {
      if (ball.moving) {
        if (evt.key == 'ArrowLeft') {
          paddle.movement = -1;
        } else if (evt.key == 'ArrowRight') {
          paddle.movement = 1;
        }
      } else {
        if (evt.key == 'ArrowUp') {
          ball.moving = true;
          return;
        }
      }
    } else if (evt.type == 'keyup' && (
          (evt.key == 'ArrowLeft' && paddle.movement == -1) ||
          (evt.key == 'ArrowRight' && paddle.movement == 1))) {
      // cancel the previous ArrowLeft or ArrowRight press
      paddle.movement = 0;
    }
  });
});</script>
    </div>      <!-- this finishes self.starttag above -->
    <p>Here's the code:</p>
    <div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">screen</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CanvasWrapper</span><span class="p">(</span><span class="s1">&#39;canvas1&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">paddle</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">length</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
  <span class="nx">thickness</span><span class="o">:</span> <span class="mi">15</span><span class="p">,</span>
  <span class="nx">speed</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">movement</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>             <span class="c1">// -1 means left, 0 means right</span>
<span class="p">};</span>
<span class="nx">paddle</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">thickness</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">ball</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">radius</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">speed</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">moving</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">toRadians</span><span class="p">(</span><span class="nx">degrees</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">degrees</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">180</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">resetGame</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">paddle</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
  <span class="nx">ball</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
  <span class="nx">ball</span><span class="p">.</span><span class="nx">centery</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">height</span><span class="o">-</span><span class="nx">paddle</span><span class="p">.</span><span class="nx">thickness</span><span class="o">-</span><span class="nx">ball</span><span class="p">.</span><span class="nx">radius</span><span class="p">;</span>
  <span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span> <span class="o">=</span> <span class="mi">270</span><span class="p">;</span>
  <span class="nx">ball</span><span class="p">.</span><span class="nx">moving</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">resetGame</span><span class="p">();</span>
<span class="nx">runRepeatedly</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">screen</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;black&#39;</span><span class="p">);</span>
  <span class="nx">screen</span><span class="p">.</span><span class="nx">drawRectangle</span><span class="p">(</span>
    <span class="nx">paddle</span><span class="p">.</span><span class="nx">centerx</span><span class="o">-</span><span class="nx">paddle</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">height</span><span class="o">-</span><span class="nx">paddle</span><span class="p">.</span><span class="nx">thickness</span><span class="p">,</span>
    <span class="nx">paddle</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">thickness</span><span class="p">,</span> <span class="s1">&#39;#00ff00&#39;</span><span class="p">);</span>
  <span class="nx">screen</span><span class="p">.</span><span class="nx">drawCircle</span><span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">centerx</span><span class="p">,</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">centery</span><span class="p">,</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">radius</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">moving</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">centery</span> <span class="o">&gt;</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">resetGame</span><span class="p">();</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">ball</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">+=</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">speed</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">toRadians</span><span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span><span class="p">));</span>
    <span class="nx">ball</span><span class="p">.</span><span class="nx">centery</span> <span class="o">+=</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">speed</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">toRadians</span><span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span><span class="p">));</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">&lt;</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">radius</span><span class="p">)</span> <span class="p">{</span>     <span class="c1">// bumps left wall</span>
      <span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span> <span class="o">=</span> <span class="mi">180</span><span class="o">-</span><span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span><span class="p">;</span>
      <span class="nx">ball</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">=</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">radius</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">&gt;</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">width</span><span class="o">-</span><span class="nx">ball</span><span class="p">.</span><span class="nx">radius</span><span class="p">)</span> <span class="p">{</span>   <span class="c1">// right wall</span>
      <span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span> <span class="o">=</span> <span class="mi">180</span><span class="o">-</span><span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span><span class="p">;</span>
      <span class="nx">ball</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">width</span><span class="o">-</span><span class="nx">ball</span><span class="p">.</span><span class="nx">radius</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">centery</span> <span class="o">&lt;</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">radius</span><span class="p">)</span> <span class="p">{</span>          <span class="c1">// top</span>
      <span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span> <span class="o">=</span> <span class="mi">360</span><span class="o">-</span><span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span><span class="p">;</span>
      <span class="nx">ball</span><span class="p">.</span><span class="nx">centery</span> <span class="o">=</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">radius</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">centery</span> <span class="o">&gt;</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">height</span><span class="o">-</span><span class="nx">paddle</span><span class="p">.</span><span class="nx">thickness</span><span class="o">-</span><span class="nx">ball</span><span class="p">.</span><span class="nx">radius</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// paddle?</span>
      <span class="nx">paddleLeft</span> <span class="o">=</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">-</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
      <span class="nx">paddleRight</span> <span class="o">=</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">+</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">paddleLeft</span> <span class="o">&lt;</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">&amp;&amp;</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">&lt;</span> <span class="nx">paddleRight</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// yes, it hits the paddle</span>
        <span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">-</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span><span class="p">;</span>
        <span class="nx">ball</span><span class="p">.</span><span class="nx">centery</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">height</span><span class="o">-</span><span class="nx">paddle</span><span class="p">.</span><span class="nx">thickness</span><span class="o">-</span><span class="nx">ball</span><span class="p">.</span><span class="nx">radius</span><span class="p">;</span>

        <span class="c1">// also adjust the angle depending on which side of the paddle the</span>
        <span class="c1">// ball hits</span>
        <span class="nx">ball</span><span class="p">.</span><span class="nx">angle</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">-</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">centerx</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">paddle</span><span class="p">.</span><span class="nx">centerx</span> <span class="o">+=</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">movement</span><span class="o">*</span><span class="nx">paddle</span><span class="p">.</span><span class="nx">speed</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">screen</span><span class="p">.</span><span class="nx">getEvents</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">evt</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;keydown&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">moving</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="s1">&#39;ArrowLeft&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">paddle</span><span class="p">.</span><span class="nx">movement</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="s1">&#39;ArrowRight&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">paddle</span><span class="p">.</span><span class="nx">movement</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="s1">&#39;ArrowUp&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">ball</span><span class="p">.</span><span class="nx">moving</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;keyup&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
          <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="s1">&#39;ArrowLeft&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">movement</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">||</span>
          <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="s1">&#39;ArrowRight&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">movement</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)))</span> <span class="p">{</span>
      <span class="c1">// cancel the previous ArrowLeft or ArrowRight press</span>
      <span class="nx">paddle</span><span class="p">.</span><span class="nx">movement</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="trig-with-a-triangle">
<span id="triangletrig"></span><h2>Trig with a Triangle<a class="headerlink" href="#trig-with-a-triangle" title="Permalink to this headline">¶</a></h2>
<div class="admonition-problem admonition">
<p class="first admonition-title">Problem</p>
<p class="last">The ball moves 10 pixels down and 20 pixels right. What angle is that?</p>
</div>
<p>Here’s another way to define <img class="math" src="_images/math/d6e3e3606422fc39649bb08a7636ac09e426e92f.png" alt="\sin"/> and <img class="math" src="_images/math/bbf74ba620672f12d367df81fdd066d0e236c0cb.png" alt="\cos"/>, and another function called
<img class="math" src="_images/math/8a9624abde60beb2b4d6a8c3b0f6574e1826667a.png" alt="\tan"/> that we haven’t used before.</p>
<div class="i">
<p><img src="_images/asymptote/6be200d872b812bea087400ccc82eb2d.png" class="align-right"/></p></div><div class="math">
<p><img src="_images/math/06d0337a475709b7fa90dd8226296a4ac97432e5.png" alt="\sin t &amp;= \frac b c \\
\cos t &amp;= \frac a c \\
\tan t &amp;= \frac b a"/></p>
</div><p>These things work only if the triangle has a 90° corner, and the little box at
bottom right means that the corner is 90°. These definitions are compatible
with the unit circle stuff above; see
<a class="reference internal" href="explanations.html#unitcircle-triangle-compat"><span class="std std-ref">this thing</span></a>.</p>
<div class="i">
<p><img src="_images/asymptote/063aaba126958fcdd43568ff046e2ed8.png" class="align-right"/></p></div><p>The green triangle is just like the blue one, but I flipped it so that we can
calculate the stuff by plugging in <img class="math" src="_images/math/5b6b6850eb07770ddaa7ab59766192428ad32111.png" alt="a=20"/> and <img class="math" src="_images/math/5b570faa96e9e3673ecfbfaaa06e2f6feac5160f.png" alt="b=10"/> without worrying about
which way things go. Let’s figure out how to calculate the <img class="math" src="_images/math/5ec053cf70dc1c98cc297322250569eda193e7a4.png" alt="t"/>:</p>
<div class="math">
<p><img src="_images/math/6ec055140998a97a5623de083e1ac7cb3765091b.png" alt="\tan t = \frac b a"/></p>
</div><div class="math">
<p><img src="_images/math/df32b8cd08f1d85a26987d36b9fe91ecffce2d6b.png" alt="t = \arctan{\frac b a} = \text{atan2}(b, a)"/></p>
</div><p>Here <img class="math" src="_images/math/726e3cfd2e5301f8ecd2b95a6681bf663ebeb6f7.png" alt="\arctan"/> is the inverse of <img class="math" src="_images/math/8a9624abde60beb2b4d6a8c3b0f6574e1826667a.png" alt="\tan"/>, so <img class="math" src="_images/math/65583f0d3949b2faea8d86f010af0b4d5b020969.png" alt="\arctan (\tan t) = t"/>. Most
programming languages have an <code class="docutils literal"><span class="pre">atan(x)</span></code> function that returns <img class="math" src="_images/math/151f9aa8667657d9baa719a843e7306d84434c03.png" alt="\arctan x"/>,
but I don’t recommend using it in this case; the <code class="docutils literal"><span class="pre">atan2(b,a)</span></code> function
returns <img class="math" src="_images/math/c67802de7f967aa6627113150a28eb0322bc7663.png" alt="\arctan{\frac b a}"/> and I recommend it instead. <code class="docutils literal"><span class="pre">atan2</span></code> looks at the
signs of <img class="math" src="_images/math/bd9d9c7512c898e0a254a0882184197bc1bd9c9f.png" alt="a"/> and <img class="math" src="_images/math/57c9d14bb082716df9000146882ce365335d08f1.png" alt="b"/> and does the right thing if they’re negative (the ball is
moving to e.g. top left). It also works if <code class="docutils literal"><span class="pre">a</span></code> is 0 and <code class="docutils literal"><span class="pre">b/a</span></code> would fail as
division by zero is undefined.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Usually people like to put <img class="math" src="_images/math/a59f68a4202623bb859a7093f0316bf466e6f75d.png" alt="x"/> before <img class="math" src="_images/math/276f7e256cbddeb81eee42e1efc348f3cb4ab5f8.png" alt="y"/> in different kinds of places, but
<code class="docutils literal"><span class="pre">atan2</span></code> is used like <code class="docutils literal"><span class="pre">atan2(y_change,</span> <span class="pre">x_change)</span></code>, <strong>not</strong> like
<code class="docutils literal"><span class="pre">atan2(x_change,</span> <span class="pre">y_change)</span></code>.</p>
</div>
<p>Finally, it’s time to calculate our stuff:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">atan2</span><span class="p">,</span> <span class="n">degrees</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">degrees</span><span class="p">(</span><span class="n">atan2</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="go">26.56505117707799</span>
</pre></div>
</div>
</div>
<div class="section" id="pythagorean-theorem">
<span id="pythagoras"></span><h2>Pythagorean Theorem<a class="headerlink" href="#pythagorean-theorem" title="Permalink to this headline">¶</a></h2>
<div class="admonition-problem admonition">
<p class="first admonition-title">Problem</p>
<p class="last">The ball moves 10 pixels down and 20 pixels right, just like in the previous
problem. How many pixels is that in total, measured diagonally?</p>
</div>
<div class="i">
<p><img src="_images/asymptote/dcfa1dfaaa79d2945672d01b3daa7570.png" class="align-right"/></p></div><p>Here’s a handy equation, also known as the Pythagorean theorem:</p>
<div class="math">
<p><img src="_images/math/9246fb1b97bca90f5ce4df821f407ee7a78c9f95.png" alt="a^2 + b^2 = c^2"/></p>
</div><p>Again, the triangle’s corner between a and b must be 90° like it is in the
image. If you’re wondering how the heck it works see
<a class="reference internal" href="explanations.html#pythagoras-proof"><span class="std std-ref">this proof</span></a>.</p>
<p>Let’s solve <img class="math" src="_images/math/ae12a24f88803b5895632e4848d87d46483c492c.png" alt="c"/> from the equation by applying <img class="math" src="_images/math/47a602d47b0c7a02304bef79c050849f30710cbf.png" alt="\sqrt{\ \ }"/> on both sides:</p>
<div class="math">
<p><img src="_images/math/6e42ec5ab7d35e9bcaffd656e9808936551903d3.png" alt="\sqrt{a^2 + b^2} = \sqrt{c^2} = |c| = c"/></p>
</div><p>Here <img class="math" src="_images/math/4d0d4bc59dc067e9d36107da1c30a3374b590682.png" alt="|c|"/> is <a class="reference internal" href="basics.html#abs"><span class="std std-ref">the absolute value</span></a>. The last step assumes <img class="math" src="_images/math/9e5f2ec2545958904136473d00f3743ab766004f.png" alt="c \ge 0"/>,
but that’s not a problem because a triangle with a negative side length doesn’t
make much sense.</p>
<p>“Hypotenuse” is a fancy word that means the longest side of a triangle with a
90° angle, and that’s why some programming languages have a <code class="docutils literal"><span class="pre">hypot(a,</span> <span class="pre">b)</span></code>
function that returns <img class="math" src="_images/math/57ad1444ff76049cec3cb823a5b5b4a4a9fcb503.png" alt="\sqrt{a^2 + b^2}"/>.</p>
<p>Let’s calculate the distance:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">hypot</span><span class="p">,</span> <span class="n">sqrt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hypot</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="go">22.360679774997898</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sqrt</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">20</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">22.360679774997898</span>
</pre></div>
</div>
</div>
<div class="section" id="vectors">
<h2>Vectors<a class="headerlink" href="#vectors" title="Permalink to this headline">¶</a></h2>
<div class="i">
<p><img src="_images/asymptote/ff64846c3565873d1fe366eb57ac2669.png" class="align-right"/></p></div><p>A point is simply a pair of x and y coordinates, and a vector represents the
difference between two points. For example, if we have the points <img class="math" src="_images/math/43c55690dcb39b7b2a37bf3ba4f365c12bb79398.png" alt="A=(1,2)"/> and
<img class="math" src="_images/math/570f76b28105e04d716df4cfff657839bea16132.png" alt="B=(3,5)"/>, the vector from A to B is
<img class="math" src="_images/math/c16efb1bebe36fd8d1d00f38bd67eb399693166a.png" alt="\overrightarrow{AB} = (3-1) \bar i + (5-2) \bar j = 2 \bar i + 3 \bar j"/>. Here
<img class="math" src="_images/math/5946ce0745c4b974284697e6137d58e8687cf614.png" alt="\bar i"/> and <img class="math" src="_images/math/75e12d28652bf0210a38052d424bc0247cbc9db1.png" alt="\bar j"/> are vectors that go right and up by 1 unit, respectively.</p>
<p>A vector like <img class="math" src="_images/math/32f9ec98633b9d4369239d778d0a84b99dfd733f.png" alt="x \bar i + y \bar j"/> can be also written as <img class="math" src="_images/math/a87a5513cba799e00d2a31f9bc1a103049718655.png" alt="&lt;x,y&gt;"/>. Use
whatever style you want.</p>
<p>We could also use vectors to do similar things as in
<a class="reference internal" href="#unitcircletrig"><span class="std std-ref">the unit circle trig section</span></a>. The advantage with
vectors is that moving the ball is really easy:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">speed_vector</span><span class="o">.</span><span class="n">x</span>
<span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">speed_vector</span><span class="o">.</span><span class="n">y</span>
</pre></div>
</div>
<p>A disadvantage is that if we want to change the angle that the ball moves at
by 1° we can’t just do <code class="docutils literal"><span class="pre">moving_angle</span> <span class="pre">+=</span> <span class="pre">1</span></code>. We’ll look into how this is done
below.</p>
<div class="i">
<p><img src="_images/asymptote/41c32bc31b5e10bed168af0f29500e31.png" class="align-right"/></p></div><p>Another nice thing about vectors is that they can be +’ed together easily. For
example, if we first move 3 units to right, then 4 units up and finally 5 more
units to right, we move a total of 8 units to right and 4 units up. That’s how
<img class="math" src="_images/math/e62871e3a581b45639eb16d77a1a2c9fc309ddb0.png" alt="3 \bar i + 4 \bar j + 5 \bar i = 8 \bar i + 4 \bar j"/>.</p>
<div class="i">
<p><img src="_images/asymptote/e2869864fd44f18676db15d1792021f1.png" class="align-left"/></p></div><p>These vector calculations are just like the
<a class="reference internal" href="#pythagoras"><span class="std std-ref">Pythagorean theorem</span></a> and
<a class="reference internal" href="#unitcircletrig"><span class="std std-ref">unit circle trig</span></a> stuff above:</p>
<div class="math">
<p><img src="_images/math/ddd8397b7b5aa9b57baccd943d469dba67325125.png" alt="l &amp;= \sqrt{a^2+b^2} = \text{hypot}(a, b) \\
t &amp;= \text{atan2}(b,a) \\
a &amp;= l \cdot \cos t \\
b &amp;= l \cdot \sin t"/></p>
</div><p>Example: if we move 1 unit to the right and 2 units up, our vector is <img class="math" src="_images/math/ee3662170a5c6a5c81a1dddf0de4c3fab3de3f29.png" alt="&lt;1,2&gt;"/>,
its length is <img class="math" src="_images/math/d66ed1ec2f96b2793e15ea6680eb96d013d056e4.png" alt="\sqrt{1^2+2^2} = \sqrt 5 \approx 2.24"/> and the angle is
<img class="math" src="_images/math/afc9336bb3210081d6c7d79c07d189ceb4f8f1a3.png" alt="\text{atan2}(2,1) \approx 63.4°"/>. On the other hand,
<img class="math" src="_images/math/17ff0913b075f0fd7a2e84cf7050a6541d4629ab.png" alt="2.24 \cdot \cos 63.4° \approx 1"/> and <img class="math" src="_images/math/dc81058fec9413df0ef51db8a15f78f1629c093a.png" alt="2.24 \cdot \sin 63.4° \approx 2"/>.</p>
<p>One way to change the angle of a vector is to first convert it to a length and
an angle, change that angle and create a new vector. It looks like this in
pseudo-ish code:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">length</span> <span class="o">=</span> <span class="n">hypot</span><span class="p">(</span><span class="n">speed_vector</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">speed_vector</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="n">angle</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">speed_vector</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">speed_vector</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">angle_change</span>
<span class="n">speed_vector</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">*</span> <span class="n">length</span>
<span class="n">speed_vector</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">*</span> <span class="n">length</span>
</pre></div>
</div>
<div class="section" id="example-vector-class-in-python">
<h3>Example: Vector class in Python<a class="headerlink" href="#example-vector-class-in-python" title="Permalink to this headline">¶</a></h3>
<p>Here’s a <code class="docutils literal"><span class="pre">Vector</span></code> class I implemented in Python running with
<a class="reference external" href="https://repl.it/">repl.it</a>. A <code class="docutils literal"><span class="pre">Vector(x,</span> <span class="pre">y)</span></code> represents
<img class="math" src="_images/math/32f9ec98633b9d4369239d778d0a84b99dfd733f.png" alt="x \bar i + y \bar j"/>. I didn’t add operator overloading because I wanted to
keep everything nice and simple. Click the “play”-shaped button at top to run
the code and then use the Python shell at right.</p>
<iframe frameborder="0" width="100%" height="800px" src="https://repl.it/MRCz/1"></iframe></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><ul>
<li class="toctree-l1"><a class="reference internal" href="basics.html">The Basics</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Geometry and Trigonometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="derivatives.html">Derivatives</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="numbertheory.html">Number Theory</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="explanations.html">Proofs and Explanations</a></li>
</ul>

<br>

<!-- abusing abbr was the first way to dot-underline stuff i found -->
<h3><abbr><a href="index.html">Back to front page</a></abbr></h3>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Akuli.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/geometry-and-trig.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>