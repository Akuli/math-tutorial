<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="style.css">
<title>Derivatives</title>
</head>
<body>
<div id="sidebar"><div class="sidebarblock"><h3>Chapters</h3><ul><li><b>Derivatives</b></li><li><a href="integrals.html">Integrals</a></li><li><a href="geometry-and-trig.html">Geometry and Trigonometry</a></li><li><a href="numbertheory.html">Number Theory</a></li></ul></div><div class="sidebarblock"><h3>Other stuff</h3><ul><li><a href="basics.html">The Basics</a></li><li><a href="explanations.html">Proofs and Explanations</a></li></ul><h3><a href="index.html">Back to front page</a></h3></div></div>
<div id="content">
<h1 id="derivatives">Derivatives<a class="headerlink" href="#derivatives" title="Link to this title">¶</a></h1><p>This chapter contains more not-so-practical math than the trig and geometry
chapter, but you may find it surprisingly fun. However, the math is not useless
gibberish isolated from real life and there's a practical example with a fun
demonstration game at the end.</p>

<h2 id="what-is-a-derivative">What is a derivative?<a class="headerlink" href="#what-is-a-derivative" title="Link to this title">¶</a></h2><p>A <i>difference</i> means how much a value changes. For example, if the value of <img class="inlinemath" src="math/9dd4e461268c8034f5c8564e155c67a6.png" />
is first 5 and then we change it to 6, <img class="inlinemath" src="math/9dd4e461268c8034f5c8564e155c67a6.png" /> changes by <img class="inlinemath" src="math/9e48412271eff0650ed355cbedce7457.png" />. Here
<img class="inlinemath" src="math/967878d1da852d4b07a961e3168b0fff.png" /> is the Greek delta letter, so if someone's code has a variable named
<code>deltax</code> it means this.</p>

<p>Let's draw a graph of something like <img class="inlinemath" src="math/4a8fccb45ff2a0ad548464d92965d3b3.png" />:</p>

<p><img src="asymptote/ad32fef189432e5b6695b49c230b0855.png" /></p><p>For example, at <img class="inlinemath" src="math/5870bb658ee9e8a6900c138365d64c80.png" /> we know that <img class="inlinemath" src="math/33a88fa3fde50b0440190113c0bbd932.png" />.</p>

<p id="slope">Let's calculate the <b>slope</b> of this line:
</p>

<p><img src="math/5743a8dae628a8aa3cae179d5208a364.png" class="blockmath" /></p><p>The bigger the slope, the faster the line goes up, so the slope describes the
"<b>growing speed</b>" or "<b>changing speed</b>". I used the points <img class="inlinemath" src="math/ec6014ffc3d92709aa6a4fea11bb3788.png" /> and
<img class="inlinemath" src="math/711e7c26ecc6a8998409e882e5d51384.png" /> when calculating the slope, but you should get the same slope with any
pair of points chosen from the line because the height grows at the same speed
everywhere.</p>

<p>The <b>derivative</b> <img class="inlinemath" src="math/3baffd623d24688b6229e8808f4dd24a.png" /> <b>is also a "changing speed"</b>, but <img class="inlinemath" src="math/8277e0910d750195b448797616e091ad.png" />
instead of <img class="inlinemath" src="math/967878d1da852d4b07a961e3168b0fff.png" /> means that the changes we use for calculating derivatives
are <i>infinitely</i> tiny. You might be worried about calculating the
<img class="inlinemath" src="math/3baffd623d24688b6229e8808f4dd24a.png" /> because if <img class="inlinemath" src="math/f80d7db2dcc93f2c6d9559bb373715c2.png" /> then we're dividing by zero, but <img class="inlinemath" src="math/acd2b09d39705a84bff035c18c9faea9.png" /> is not
zero; it's just really, really small.</p>

<p>If the graph is not a straight line, we get different <img class="inlinemath" src="math/d87922a765f12f89c3c4acbaaf5e468c.png" />
ratios depending on which points we choose for calculating <img class="inlinemath" src="math/7f5a0c1aa836580b7c14bcd90384f9c9.png" /> and
<img class="inlinemath" src="math/b56546a86ab832a9b2a5b15f96519319.png" />. The derivative <img class="inlinemath" src="math/3baffd623d24688b6229e8808f4dd24a.png" /> is not the same number everywhere,
but let's try to figure out how to calculate it anyway.</p>

<img src="asymptote/67caa075ccae9a1b2eecb8f1fa8f2d86.png" style="float:right;" /><p>Let's look at <img class="inlinemath" src="math/8e7dd5d3e76aa952e21999a5537dcffb.png" /> and <img class="inlinemath" src="math/acd2b09d39705a84bff035c18c9faea9.png" /> of the graph <img class="inlinemath" src="math/7c1c9491ba7c6e8d6d2cfa82e39b22ca.png" />, where <img class="inlinemath" src="math/8fa14cdd754f91cc6554c9e71929cce7.png" /> can be any
function that has a derivative. Most functions you'll come across have a
derivative; if you want to know more, <a href="explanations.html#which-functions-have-derivatives">click
here</a>.</p>

<p>The image at right seems to say that <img class="inlinemath" src="math/ea9c37cbce8a07d1c2b66b335f9ee046.png" />. Let's try to solve
<img class="inlinemath" src="math/3baffd623d24688b6229e8808f4dd24a.png" />:</p>

<p><img src="math/8e8078dad52edd1920af0de16a17e390.png" class="blockmath" /></p><p>Most mathematicians don't like the above formula because <img class="inlinemath" src="math/acd2b09d39705a84bff035c18c9faea9.png" /> is a
"small number" and it isn't really clear how it behaves in different
situations. Here's a better definition:</p>

<p><img src="math/16e9125c53f45cf8799912372a4f991e.png" class="blockmath" /></p><p>The <img class="inlinemath" src="math/6fc219cdeba331e561d143441aa359eb.png" /> thing means that we take the <b>limit</b> as <img class="inlinemath" src="math/2510c39011c5be704182423e3a695e91.png" /> approaches 0. It's
essentially same as our <img class="inlinemath" src="math/acd2b09d39705a84bff035c18c9faea9.png" /> thing, but more explicit and better defined in
some corner cases.
</p>

<h2 id="first-example">First Example<a class="headerlink" href="#first-example" title="Link to this title">¶</a></h2><p>The graph <img class="inlinemath" src="math/6e3935bb1907e05aef6649527518e040.png" /> is curvy:</p>

<p><img src="asymptote/29215f560407085177ee585fa9ef1b6e.png" /></p><p>Let's find the derivative of <img class="inlinemath" src="math/32f5240d0dbf2ccbe75ef7f8ef2015e0.png" /> by plugging in <img class="inlinemath" src="math/7f185b1869db0b3bcc5f8479a9bd558d.png" /> to the
definition we ended up with. If we just try to evaluate it at <img class="inlinemath" src="math/2ba1b3acb05d4cc60dedf59890f964f6.png" /> we get
<img class="inlinemath" src="math/8b9d8d4766e2abc43d0f572d2a9edba7.png" /> so you might think that we need to evaluate it at e.g.
<img class="inlinemath" src="math/f58d3c05a36f8dee4d96f8874be9f16e.png" />, but we don't! Have a look:</p>

<p><img src="math/94c0024f50df59854ddb41cae5ef8b3b.png" class="blockmath" /></p><img src="asymptote/969f40feaa8e24a235fb8ade83c399a3.png" style="float:right;" /><p>I think this is cool. We started with a complicated-looking thing but finally
we arrived at just <img class="inlinemath" src="math/2204c2b4d60ae2fd5279ec54cfaed2a4.png" />. What's more, the <img class="inlinemath" src="math/2204c2b4d60ae2fd5279ec54cfaed2a4.png" /> is not just a random value we
got out of a spooky calculation; for example, at <img class="inlinemath" src="math/566162f3afaf9f5f67e7d7ca7a4b424e.png" /> the derivative is
<img class="inlinemath" src="math/a516b4ec389fe440150f7c6412631ab8.png" />, so if we draw a straight line that barely touches <img class="inlinemath" src="math/6e3935bb1907e05aef6649527518e040.png" /> at
<img class="inlinemath" src="math/566162f3afaf9f5f67e7d7ca7a4b424e.png" /> its slope will also be 4 like in the image at right.</p>

<p>You can also find the derivative of the <img class="inlinemath" src="math/45046de61b285009b23590450000d87f.png" /> example we looked at earlier,
and turns out that <img class="inlinemath" src="math/5666c048c3e6aeb894ef9de1e903de20.png" />. It makes sense
because derivatives are just like slopes but they also work with curvy things,
and there's no difference between a slope and a derivative of a straight line.</p>

<p><b>Note:</b> The derivative <img class="inlinemath" src="math/3baffd623d24688b6229e8808f4dd24a.png" /> can be also written as <img class="inlinemath" src="math/7bdae2eac1d9ea96203e434aa509bbe9.png" />,
although it doesn't make much sense because <img class="inlinemath" src="math/8e7dd5d3e76aa952e21999a5537dcffb.png" /> doesn't mean <img class="inlinemath" src="math/8277e0910d750195b448797616e091ad.png" /> times <img class="inlinemath" src="math/415290769594460e2e485922904f345d.png" />.</p>

<p>Another common style is to put a single quote after a function name, like
<img class="inlinemath" src="math/e3e396b27470ebc2f29600ab5e1b8d3e.png" />.
</p>

<h2 id="faster">Faster!<a class="headerlink" href="#faster" title="Link to this title">¶</a></h2><p>Finding the derivative was kind of complicated and really slow. These rules
change everything. Most of these rules are
<a href="explanations.html#derivative-rules">easy to prove</a> so there is no magic
involved.</p>

<p>I have listed many rules here, but <b>don't panic</b>; there's no need to memorize
them. As before <img class="inlinemath" src="math/8fa14cdd754f91cc6554c9e71929cce7.png" /> and <img class="inlinemath" src="math/b2f5ff47436671b6e533d8dc3614845d.png" /> can be any functions as long as they have a
derivative (e.g. <img class="inlinemath" src="math/452ba195c426292b505722cc3fa0f9f3.png" /> and <img class="inlinemath" src="math/16276dace2435af3d6698e25188461ab.png" />), and <img class="inlinemath" src="math/4a8a08f09d37b73795649038408b5f33.png" /> can be any constant
like <img class="inlinemath" src="math/a87ff679a2f3e71d9181a67b7542122c.png" /> or <img class="inlinemath" src="math/8517688b5139f2bd9d869a95a9a6db8c.png" /> but not e.g. <img class="inlinemath" src="math/2204c2b4d60ae2fd5279ec54cfaed2a4.png" /> because that depends on the value of <img class="inlinemath" src="math/9dd4e461268c8034f5c8564e155c67a6.png" />.</p>

<p><img src="math/b83ee525a36483f71ebff1a58e16d9f4.png" class="blockmath" /></p><p>So, if you want to find the derivative of <img class="inlinemath" src="math/32f5240d0dbf2ccbe75ef7f8ef2015e0.png" /> just use the <img class="inlinemath" src="math/901a4ac1bf0dc042656f4a045eb75433.png" />
rule:</p>

<p><img src="math/f03d4c0f56b886fd5c0b6f8616ce2f38.png" class="blockmath" /></p><p>Now you can also find derivatives of long and scary functions easily and
quickly. For example:</p>

<p><img src="math/72d34e4e767eaef0dad32885ee3fa749.png" class="blockmath" /></p><p>Of course, there's no need to write down all of these steps.</p>

<p>Note that if you have something like <img class="inlinemath" src="math/a15c72896537a69bef32c65c61a8d307.png" /> as opposed to <img class="inlinemath" src="math/32f5240d0dbf2ccbe75ef7f8ef2015e0.png" /> you
need to use the <img class="inlinemath" src="math/856e7360e9e14bc37ca22a88f8cf4550.png" /> rule. In this example,
you would plug in <img class="inlinemath" src="math/d271cedde6675e55152d3c7a4236f775.png" /> and <img class="inlinemath" src="math/59e1e9ebd809c00d4d27b0fe51e502de.png" /> to get this:</p>

<p><img src="math/36fc6ebd05d802479e95d59db0ca2dc6.png" class="blockmath" /></p><p>In some cases it's also possible to first open up something like the <img class="inlinemath" src="math/825eb58f25f6ec5871bf08a67ada3342.png" />:</p>

<p><img src="math/7acc8ce698b250dce11d191c87aa7ff8.png" class="blockmath" /></p><p>You can also use a nice symbolic calculation library, like Python's
<a href="http://www.sympy.org">sympy</a> (can be installed with pip):</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span><span style="color: #007020; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">sympy</span> <span style="color: #007020; font-weight: bold">import</span> <span style="color: #666666">*</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>init_printing()
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>x <span style="color: #666666">=</span> Symbol(<span style="color: #4070a0">&#39;x&#39;</span>)
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>diff(x<span style="color: #666666">**</span><span style="color: #40a070">2</span>, x)
<span style="color: #888888">2⋅x</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>diff((<span style="color: #40a070">2</span><span style="color: #666666">*</span>x)<span style="color: #666666">**</span><span style="color: #40a070">2</span>, x)
<span style="color: #888888">8⋅x</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>diff(<span style="color: #40a070">5</span> <span style="color: #666666">*</span> x<span style="color: #666666">**</span><span style="color: #40a070">3</span> <span style="color: #666666">-</span> <span style="color: #40a070">6</span> <span style="color: #666666">*</span> x<span style="color: #666666">**</span><span style="color: #40a070">2</span> <span style="color: #666666">+</span> <span style="color: #40a070">7</span><span style="color: #666666">*</span>x <span style="color: #666666">-</span> <span style="color: #40a070">123</span>, x)
<span style="color: #888888">    2           </span>
<span style="color: #888888">15⋅x  - 12⋅x + 7</span>
</pre></div>
<p>Here "diff" is short for "differenciate", and it means finding a derivative.</p>

<p>Libraries like sympy are also useful for doing long and messy calculations like
the one we did above:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span><span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">f</span>(x):
<span style="color: #c65d09; font-weight: bold">... </span>    <span style="color: #007020; font-weight: bold">return</span> x<span style="color: #666666">**</span><span style="color: #40a070">2</span>
<span style="color: #c65d09; font-weight: bold">...</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>h <span style="color: #666666">=</span> Symbol(<span style="color: #4070a0">&#39;h&#39;</span>)
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>(f(x<span style="color: #666666">+</span>h)<span style="color: #666666">-</span>f(x))<span style="color: #666666">/</span>h
<span style="color: #888888">   2          2</span>
<span style="color: #888888">- x  + (h + x)</span>
<span style="color: #888888">───────────────</span>
<span style="color: #888888">       h</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>simplify((f(x<span style="color: #666666">+</span>h)<span style="color: #666666">-</span>f(x))<span style="color: #666666">/</span>h)
<span style="color: #888888">h + 2⋅x</span>
</pre></div>
<h2 id="example-smooth-jumps">Example: Smooth Jumps<a class="headerlink" href="#example-smooth-jumps" title="Link to this title">¶</a></h2><p>Let's say you're making a game where a player can jump over something. If the
player moves right at a steady speed, which of these jumps looks best?</p>

<p><img src="asymptote/f81491239eb1049c68ba70f3c6c2eb82.png" /></p><p>The answer is obvious – the rightmost jump looks best. It's time to figure out
how to make games with jumps like that.</p>

<p>Let's say that <img class="inlinemath" src="math/e358efa489f58062f10dd7316b65649e.png" /> is time and <img class="inlinemath" src="math/2510c39011c5be704182423e3a695e91.png" /> is the height of our player, so we get this
graph:</p>

<p><img src="asymptote/b15d00f37c47a32643c44612305b2439.png" /></p><p>This looks like a parabola, and the equation of a parabola is <img class="inlinemath" src="math/cc787ff424536184da6053b3bd5e6d67.png" />
where <img class="inlinemath" src="math/0cc175b9c0f1b6a831c399e269772661.png" />, <img class="inlinemath" src="math/92eb5ffee6ae2fec3ad71c777531578f.png" /> and <img class="inlinemath" src="math/4a8a08f09d37b73795649038408b5f33.png" /> are constants. The changing speed of height is the
falling speed. Let's call that <img class="inlinemath" src="math/9e3669d19b675bd57058fd4664205d2a.png" /> like velocity.</p>

<p><img src="math/5c051d833f0e5dafc419cbd7e4b8af96.png" class="blockmath" /></p><p>On the other hand, the changing speed of velocity is the acceleration caused by
gravity. Let's call that <img class="inlinemath" src="math/b2f5ff47436671b6e533d8dc3614845d.png" />.</p>

<p><img src="math/86259fdb69bddaabfefcba3c9339d919.png" class="blockmath" /></p><p>Note how the <img class="inlinemath" src="math/e358efa489f58062f10dd7316b65649e.png" /> disappeared and we're left with just the constant <img class="inlinemath" src="math/e36314e624d2b2ca257e1f1ecb381f93.png" />. This
makes sense because the gravity is always the same, no matter what time it is.</p>

<p>This Python program...</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>height <span style="color: #666666">=</span> <span style="color: #40a070">0</span>
velocity <span style="color: #666666">=</span> <span style="color: #40a070">10</span>
gravity <span style="color: #666666">=</span> <span style="color: #40a070">2</span>

<span style="color: #007020; font-weight: bold">while</span> height <span style="color: #666666">&gt;=</span> <span style="color: #40a070">0</span>:
    <span style="color: #007020">print</span>(<span style="color: #4070a0">&#39; &#39;</span><span style="color: #666666">*</span>height <span style="color: #666666">+</span> <span style="color: #4070a0">&#39;O&#39;</span>)
    height <span style="color: #666666">+=</span> velocity
    velocity <span style="color: #666666">-=</span> gravity
</pre></div>
<p>...prints this awesome parabola:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>O
          O
                  O
                        O
                            O
                              O
                              O
                            O
                        O
                  O
          O
O
</pre></div>
<p>You can use similar code for doing jumps in games. Here's a demo created with
my canvaswrapper.js script. Click it and use arrow keys to move the ball.</p>

<script type="text/javascript" src="canvaswrapper.js"></script><canvas id="canvas1" width="600" height="400" tabindex="1"></canvas><script>var screen = new CanvasWrapper('canvas1');

const GRAVITY = 1.5;
var player = {
  x: screen.width/2,    // centered
  height: 0,            // distance from bottom of screen to player's bottom
  velocity: 0,          // positive means up
  velocityMax: 30,      // velocity immediately after a jump
  sidewayMovement: 0,   // -1 is left, +1 right
  sidewaySpeed: 10,
  ballRadius: 30,
};


runRepeatedly(function() {
  screen.fill('black');
  screen.drawCircle(player.x, screen.height-player.height-player.ballRadius,
                    player.ballRadius, 'white');

  player.x += player.sidewayMovement * player.sidewaySpeed;
  player.height += player.velocity;
  player.velocity -= GRAVITY;

  if (player.height < 0) {
    // player hits the ground
    player.height = 0;
    player.velocity = 0;
  }

  screen.getEvents().forEach(evt => {
    if (evt.type == 'keydown') {
      if (evt.key == 'ArrowLeft') {
        player.sidewayMovement = -1;
      } else if (evt.key == 'ArrowRight') {
        player.sidewayMovement = 1;
      } else if (evt.key == 'ArrowUp') {
        player.velocity = player.velocityMax;
      }
    } else if (evt.type == 'keyup' && (
          (evt.key == 'ArrowLeft' && player.sidewayMovement == -1) ||
          (evt.key == 'ArrowRight' && player.sidewayMovement == 1))) {
      // cancel the previous ArrowLeft or ArrowRight press
      player.sidewayMovement = 0;
    }
  });
});
</script><p>Here's the code:</p><div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #007020; font-weight: bold">var</span> screen <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">new</span> CanvasWrapper(<span style="color: #4070a0">&#39;canvas1&#39;</span>);

<span style="color: #007020; font-weight: bold">const</span> GRAVITY <span style="color: #666666">=</span> <span style="color: #40a070">1.5</span>;
<span style="color: #007020; font-weight: bold">var</span> player <span style="color: #666666">=</span> {
  x<span style="color: #666666">:</span> screen.width<span style="color: #666666">/</span><span style="color: #40a070">2</span>,    <span style="color: #60a0b0; font-style: italic">// centered</span>
  height<span style="color: #666666">:</span> <span style="color: #40a070">0</span>,            <span style="color: #60a0b0; font-style: italic">// distance from bottom of screen to player&#39;s bottom</span>
  velocity<span style="color: #666666">:</span> <span style="color: #40a070">0</span>,          <span style="color: #60a0b0; font-style: italic">// positive means up</span>
  velocityMax<span style="color: #666666">:</span> <span style="color: #40a070">30</span>,      <span style="color: #60a0b0; font-style: italic">// velocity immediately after a jump</span>
  sidewayMovement<span style="color: #666666">:</span> <span style="color: #40a070">0</span>,   <span style="color: #60a0b0; font-style: italic">// -1 is left, +1 right</span>
  sidewaySpeed<span style="color: #666666">:</span> <span style="color: #40a070">10</span>,
  ballRadius<span style="color: #666666">:</span> <span style="color: #40a070">30</span>,
};


runRepeatedly(<span style="color: #007020; font-weight: bold">function</span>() {
  screen.fill(<span style="color: #4070a0">&#39;black&#39;</span>);
  screen.drawCircle(player.x, screen.height<span style="color: #666666">-</span>player.height<span style="color: #666666">-</span>player.ballRadius,
                    player.ballRadius, <span style="color: #4070a0">&#39;white&#39;</span>);

  player.x <span style="color: #666666">+=</span> player.sidewayMovement <span style="color: #666666">*</span> player.sidewaySpeed;
  player.height <span style="color: #666666">+=</span> player.velocity;
  player.velocity <span style="color: #666666">-=</span> GRAVITY;

  <span style="color: #007020; font-weight: bold">if</span> (player.height <span style="color: #666666">&lt;</span> <span style="color: #40a070">0</span>) {
    <span style="color: #60a0b0; font-style: italic">// player hits the ground</span>
    player.height <span style="color: #666666">=</span> <span style="color: #40a070">0</span>;
    player.velocity <span style="color: #666666">=</span> <span style="color: #40a070">0</span>;
  }

  screen.getEvents().forEach(evt =&gt; {
    <span style="color: #007020; font-weight: bold">if</span> (evt.type <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;keydown&#39;</span>) {
      <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowLeft&#39;</span>) {
        player.sidewayMovement <span style="color: #666666">=</span> <span style="color: #666666">-</span><span style="color: #40a070">1</span>;
      } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowRight&#39;</span>) {
        player.sidewayMovement <span style="color: #666666">=</span> <span style="color: #40a070">1</span>;
      } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowUp&#39;</span>) {
        player.velocity <span style="color: #666666">=</span> player.velocityMax;
      }
    } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (evt.type <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;keyup&#39;</span> <span style="color: #666666">&amp;&amp;</span> (
          (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowLeft&#39;</span> <span style="color: #666666">&amp;&amp;</span> player.sidewayMovement <span style="color: #666666">==</span> <span style="color: #666666">-</span><span style="color: #40a070">1</span>) <span style="color: #666666">||</span>
          (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowRight&#39;</span> <span style="color: #666666">&amp;&amp;</span> player.sidewayMovement <span style="color: #666666">==</span> <span style="color: #40a070">1</span>))) {
      <span style="color: #60a0b0; font-style: italic">// cancel the previous ArrowLeft or ArrowRight press</span>
      player.sidewayMovement <span style="color: #666666">=</span> <span style="color: #40a070">0</span>;
    }
  });
});
</pre></div>
</div>
</body>
</html>
