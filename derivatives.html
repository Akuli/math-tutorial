<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="style.css">
<title>Derivatives</title>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'] ],
      displayMath: [ ['$$','$$'] ],
    },
    "HTML-CSS": { availableFonts: ["TeX"] },
    TeX: {
      Macros: {
        // awesome, i have latex inside javascript inside html inside python
        // https://xkcd.com/1638/
        red: [ "\\color{red}{#1}", 1 ],
        blue: [ "\\color{blue}{#1}", 1 ],
        green: [ "\\color{green}{#1}", 1 ],
        maroon: [ "\\color{maroon}{#1}", 1 ],
        olive: [ "\\color{olive}{#1}", 1 ],
        purple: [ "\\color{purple}{#1}", 1 ],
        black: [ "\\color{black}{#1}", 1 ],
        rcancel: [ "\\require{cancel}\\red{\\cancel{\\black{#1}}}", 1 ]
      }
    }
  });
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="https://fonts.googleapis.com/css?family=Cabin|Quicksand" rel="stylesheet">
</head>
<body>
<div id="content">
<div id="sidebar"><div class="sidebarblock"><h3>Interesting for programmers</h3><ul><li><a href="infinity.html">Infinity</a></li><li><a href="numbertheory.html">Number Theory</a></li><li><a href="fib.html">Fibonacci Sequence</a></li><li><b>Derivatives</b></li><li><a href="geometry-and-trig.html">Geometry and Trig</a></li><li><a href="physics.html">Physics Stuff</a></li></ul></div><div class="sidebarblock"><h3>Kinda fun</h3><ul><li><a href="integrals.html">Integrals</a></li><li><a href="integral-techniques.html">Integration Techniques</a></li><li><a href="more-integrals.html">More Integrals</a></li></ul></div><div class="sidebarblock"><h3>Mathy</h3><ul><li><a href="more-derivatives.html">More Derivatives</a></li><li><a href="more-geometry-and-trig.html">More Geometry and Trig</a></li><li><a href="explog.html">Exponent Functions and Logarithms</a></li></ul></div><div class="sidebarblock"><h3>Mind-blowing</h3><ul><li><a href="taylor.html">Taylor Series</a></li><li><a href="eulerformula.html">Euler's Formula</a></li></ul></div><div class="sidebarblock"><h3>Other stuff</h3><ul><li><a href="basics.html">The Basics</a></li><li><a href="graphs.html">Graphs</a></li><li><a href="summary.html">Summary</a></li></ul><h3><a href="index.html">Back to front page</a></h3></div></div>
<h1 id="derivatives">Derivatives<a class="headerlink" href="#derivatives" title="Link to this title">¶</a></h1><p>Derivatives are one of my favorite things in math. At first they seem
like calculating their values will be quite complicated, but it turns
out to be surprisingly easy.</p>

<p>Derivatives are also not useless gibberish isolated from real life. There's a
practical demonstration game at the end of the chapter, and we can do all kinds
of amazing other stuff with derivatives.</p>

<div class="box redbox"><p>This chapter assumes that you know what limits are. If you have never heard
of them before, I highly recommend reading <a href="infinity.html#limits">the limit section in the
infinity chapter</a> first.
</p>

</div><h2 id="slopes">Slopes<a class="headerlink" href="#slopes" title="Link to this title">¶</a></h2><p>The equation of any (non-vertical) line is of the form $y=sx+c$ where $s$
is the slope and $c$ is a constant. If you have no idea what that means, use
this awesome demo thing that <a href="https://github.com/PurpleMyst/">a friend of mine</a>
made to see how changing the constant and the slope affects the line. The
equation of the line is shown in <span style="color: blue;">blue</span> in the
top left corner.</p>

<p><iframe src="https://purplemyst.github.io/generic-graphing/line.html"
        width="350" height="400"></iframe></p>

<p>The $c$ constant specifies how high the line is. It's important to note what
happens to the line as you change the slope; the bigger the slope, the steeper
the line goes up, and a negative slope means that the line goes down instead.
You can think of slope as some kind of <b>growth rate</b>.</p>

<p>A <i>difference</i> means how much a value changes. For example, if the value of $x$
is first 5 and then we change it to 6, $x$ changes by $\Delta x = 1$. Here
$\Delta$ is the Greek delta letter, so if someone's code has a variable named
<code>deltax</code> it means this.</p>

<p>Now choose two points from the line and imagine drawing a triangle between
those points. Let's call the height of this triangle $\Delta y$ and the width
$\Delta x$. Like this:</p>

<p><img width="235" height="397" class="asymptote" src="asymptote/9c1fad6084bc4147abb7a2830dc410af.svg" /></p><p>In this example I have set the constant term to 1 and slope to 2, and with
these points, I get $\Delta y = 6$ and $\Delta x = 3$. Here's something
interesting:</p>

$$\begin{align}\frac{\Delta y}{\Delta x} = \frac 6 3 = 2\end{align}$$<p>This is the slope. You can always find the slope by drawing a triangle like
this and then calculating $\frac{\Delta y}{\Delta x}$. Just to convince
yourself, choose another pair of points and try it again; you still get the
same slope.</p>

<h2 id="what-is-a-derivative">What is a derivative?<a class="headerlink" href="#what-is-a-derivative" title="Link to this title">¶</a></h2><p>Now we know what slopes of lines are and how to calculate them, but can we
calculate slopes of curves that look e.g. like this?</p>

<p><img width="283" height="257" class="asymptote" src="asymptote/8865a05b83f756f0fc3440145b5f4292.svg" /></p><p>The problem with this is that we don't get the same $\frac{\Delta y}{\Delta x}$
ratios everywhere. You can think about $\frac{\Delta y}{\Delta x}$ as the
growth rate, and as you can see in the above graph, the values of $x^2$ grow at
different rates in different places. For example, the slope seems to be $0$ at
$x=0$ and something positive when $x$ is positive.</p>

<p>Maybe we could calculate the slope with a very small triangle?</p>

<p><img width="283" height="243" class="asymptote" src="asymptote/789895b3a346a823efd8eb985cb8afbf.svg" /></p><p>We can calculate the exact slope at a point with a limit like
$\displaystyle\lim_{\Delta x\to0} \textstyle\frac{\Delta y}{\Delta x}$. This
limit is known as the <b>derivative</b>.</p>

<p>Let's find a formula for calculating derivatives. We'll do this for a general
$y=f(x)$ graph where $f$ is a <a href="basics.html#functions">function</a> instead of
$y=x^2$, so we'll get something that is not limited to just $x^2$.</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>&lt;theelous3&gt;    so the height of x, or x&#39;s &quot;y&quot;, can be described as
               f(x), where f = lambda x: x**2
</pre></div>
<p><img width="340" height="295" class="asymptote" src="asymptote/ad0979adbaef6baf7140e824f2eea01e.svg" /></p><p>There are quite a few things going on in the above drawing. Make sure that you
fully understand it before moving on.</p>

<p>If we look at the length of the $f(x+\Delta x)$ line and take off the length of
the $f(x)$ line, we're left with $\Delta y$. So $f(x+\Delta x)-f(x)=\Delta y$.
Let's plug this into our definition of derivative:</p>

$$\begin{align}\lim_{\Delta x\to0} \frac{\Delta y}{\Delta x}  = \lim_{\Delta x\to0} \frac{f(x+\Delta x)-f(x)}{\Delta x}\end{align}$$<p>Finally we'll replace $\Delta x$ with $h$ just to make this formula less
annoying to use. This is especially true for writing by hand because we can't
just copy/paste $\Delta x$ everywhere.</p>

$$\begin{align}\lim_{\Delta x\to0} \frac{\Delta y}{\Delta x} = \lim_{h\to0} \frac{f(x+h)-f(x)}{h}\end{align}$$<div class="floatingbox"><h2> Handy thing: $(x+h)^2=x^2+2xh+h^2$</h2><p>Proof using $(a+b)c=ac+bc$:</p>

$$\begin{align}& \ (x+h)^2 \\
=&\ (x+h)(x+h) \\
=&\ x(x+h)+h(x+h) \\
=&\ xx+xh+hx+hh \\
=&\ x^2+2xh+h^2\end{align}$$</div><p>Now we can set $f(x)=x^2$ and see what we get.</p>

$$\begin{align}\lim_{\Delta x\to0} \frac{\Delta y}{\Delta x}  &= \lim_{h\to0} \frac{f(x+h)-f(x)}{h} \\
&= \lim_{h\to0} \frac{(x+h)^2-x^2}{h} \\
&= \lim_{h\to0} \frac{\rcancel{x^2} + 2xh + h^2 \rcancel{- x^2}}{h} \\
&= \lim_{h\to0} \frac{2xh + h^2}{h} \\
&= \lim_{h\to0} \frac{(2x+h)\rcancel h}{\rcancel h} \\
&= \lim_{h\to0} \frac{2x+h}{1} \\
&= \lim_{h\to0} (2x+h) \\
&= 2x\end{align}$$<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>&lt;Akuli&gt;        so it&#39;s 2x
&lt;Akuli&gt;        boom
&lt;theelous3&gt;    oh shit
&lt;Akuli&gt;        lol
&lt;Akuli&gt;        i think this is cool
&lt;theelous3&gt;    lmao, that&#39;s kinda awesome
&lt;Akuli&gt;        right :) yeah
</pre></div>
<p>We started with a complicated-looking thing but finally we arrived at just
$2x$. What's more, the $2x$ is not just a random value we got out of a spooky
calculation; for example, at $x=2$ the derivative is $2 \cdot 2 = 4$, so if we
draw a straight line that barely touches $y=x^2$ at $x=2$ its slope will also
be 4. Like this:</p>

<p><img width="159" height="340" class="asymptote" src="asymptote/1bf322a431d11b3e93edbee9728a3924.svg" /></p><div class="box graybox"><h2> Exercise</h2><p>Find the derivative of $x^3$.
</p>

</div><p>Earlier we looked at the line $y=2x+1$ and we got the slope 2 from any
$\frac{\Delta y}{\Delta x}$ ratio, but derivatives are
$\displaystyle\lim_{\Delta x\to0} \textstyle\frac{\Delta y}{\Delta x}$, so the
derivative of $2x+1$ should be 2. Let's see if that works:</p>

$$\begin{align}y = f(x) = 2x+1\end{align}$$$$\begin{align}\lim_{\Delta x\to0} \frac{\Delta y}{\Delta x}  &= \lim_{h\to0} \frac{f(x+h)-f(x)}{h} \\
&= \lim_{h\to0} \frac{(2(x+h)+1)-(2x+1)}{h} \\
&= \lim_{h\to0} \frac{2(x+h)\rcancel{+1}-2x\rcancel{-1}}{h} \\
&= \lim_{h\to0} \frac{\rcancel{2x}+2h\rcancel{-2x}}{h} \\
&= \lim_{h\to0} \frac{2\rcancel h}{\rcancel h} \\
&= 2\end{align}$$<p>Note how $x$ disappeared: the derivative of $x^2$ is $2x$, but the derivative
of $2x+1$ is $2$ without any $x$. In other words, the derivative of $2x+1$ is
the same with any $x$ value. This makes sense because straight lines have the
same slope everywhere.</p>

<div class="box graybox"><h2> Exercise</h2><p>Prove that the derivative of $sx+c$ is always $s$. Here $s$ and $c$ are
constants.
</p>

</div><p><p></p></p>

<div id="notation" class="box redbox"><p>This stuff is in a red box just to make sure that you read it.</p>

<p>The derivative $\displaystyle\lim_{\Delta x\to0} \textstyle\frac{\Delta y}{\Delta x}$
is often written as $\frac{dy}{dx}$. Historically $dy$ and $dx$ were
infinitely tiny changes of $y$ and $x$, but nowadays limits are
preferred over "infinitely small numbers".</p>

<p>It's also common to write $\frac{d}{dx} y$ instead of $\frac{dy}{dx}$,
although it doesn't make much sense because $dy$ doesn't mean $d$ times $y$.
Another common style is to put a single quote after a function name, like
$f'(x) = \frac{d}{dx} f(x)$.</p>

<p>Sometimes programmers write <code>dy</code> when they really mean <code>deltay</code>.
It doesn't make sense either, but <code>dy</code> is much less typing than
<code>deltay</code>.
</p>

</div><h2 id="faster">Faster!<a class="headerlink" href="#faster" title="Link to this title">¶</a></h2><p>Let's say that you want to calculate something like this:</p>

$$\begin{align}\frac{d}{dx} (6x^2+7x-123)\end{align}$$<p>That would be a horribly complicated calculation with the definition of
derivative. In these cases, we can use some handy-dandy rules:</p>

<ul><li>If we have a bunch of things added or substracted from each other we can find
  the derivatives of each thing one by one.
</li></ul>$$\begin{align}\frac{d}{dx} (6x^2+7x-123) = \frac{d}{dx}(6x^2) + \frac{d}{dx}(7x) - \frac{d}{dx}(123)\end{align}$$<ul><li>You can move constants to the front of the $\frac{d}{dx}$. This works only
  with constants; you cannot move anything with $x$ in it to the front.
</li></ul>$$\begin{align}\frac{d}{dx}(6x^2) = 6 \cdot \frac{d}{dx}(x^2)\end{align}$$<ul><li>Derivative of $x^2$ is $2x$.
</li></ul>$$\begin{align}\frac{d}{dx}(x^2) = 2x\end{align}$$<ul><li>The derivative of $x$ is 1.
</li></ul>$$\begin{align}\frac{d}{dx} x = 1\end{align}$$<ul><li>The derivative of any constant (e.g. 3) is $0$.
</li></ul>$$\begin{align}\frac{d}{dx} 3 = 0\end{align}$$<p>That's quite a few rules, but they make this handy:</p>

$$\begin{align}&  \frac{d}{dx} (6x^2+7x-123) \\
=& \frac{d}{dx}(6x^2) + \frac{d}{dx}(7x) - \frac{d}{dx}(123) \\
=& 6 \cdot \frac{d}{dx}(x^2) + 7 \cdot \frac{d}{dx} x - 0 \\
=& 6 \cdot 2x + 7 \cdot 1 \\
=& 12x + 7\end{align}$$<p>Don't believe these rules just because I say that they work; in <a href="more-derivatives.html">the next
chapter</a> we'll <i>prove</i> that they work.</p>

<p>You can also use a nice symbolic calculation library, like Python's
<a href="http://www.sympy.org">sympy</a> (can be installed with pip):</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span><span style="color: #007020; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">sympy</span> <span style="color: #007020; font-weight: bold">import</span> <span style="color: #666666">*</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>init_printing()
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>x <span style="color: #666666">=</span> Symbol(<span style="color: #4070a0">&#39;x&#39;</span>)
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>diff(x<span style="color: #666666">**</span><span style="color: #40a070">2</span>, x)
<span style="color: #888888">2⋅x</span>
<span style="color: #c65d09; font-weight: bold">&gt;&gt;&gt; </span>diff(<span style="color: #40a070">6</span> <span style="color: #666666">*</span> x<span style="color: #666666">**</span><span style="color: #40a070">2</span> <span style="color: #666666">+</span> <span style="color: #40a070">7</span><span style="color: #666666">*</span>x <span style="color: #666666">-</span> <span style="color: #40a070">123</span>, x)
<span style="color: #888888">12⋅x + 7</span>
</pre></div>
<p>Here "diff" is short for "differentiate", and it means finding a derivative.</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>&lt;Akuli&gt;        theelous3, &gt;&gt;&gt; diff(x**2)
&lt;theelous3&gt;    that is nice
&lt;theelous3&gt;    oh :P
&lt;theelous3&gt;    nice
&lt;Akuli&gt;        yeah
&lt;Akuli&gt;        hmm
&lt;Akuli&gt;        i expected you to be like oh shit why did we do all this by hand
&lt;theelous3&gt;    nah
&lt;theelous3&gt;    would learn nothing just doing this
</pre></div>
<h2 id="chain-rule">Chain Rule<a class="headerlink" href="#chain-rule" title="Link to this title">¶</a></h2><p>This is a separate section just because it's easy to forget using this
derivative rule.</p>

<p>For example, let's say that we want to find the derivative of $(2x)^2$:</p>

$$\begin{align}\frac{d}{dx}\bigl((2x)^2\bigr) \mathop{=}^{\red ?} 2(2x) = 4x\end{align}$$<p>I put a red ? over the equal sign because we used the $\frac{d}{dx}x^2=2x$ rule
when the inside was $2x$ instead of $x$. We aren't sure if we can do that just
yet, and we actually get a <i>different</i> result if we start by using the
$(ab)^2=a^2b^2$ rule from <a href="basics.html#powers-and-square-root">the basics page</a>:</p>

$$\begin{align}(2x)^2 = 2^2x^2 = 4x^2\end{align}$$$$\begin{align}\frac{d}{dx}\bigl((2x)^2\bigr)=\frac{d}{dx}(4x^2)=4\cdot\frac{d}{dx}(x^2)=4\cdot2x=8x\end{align}$$<p>This solution must be correct because we know that each part of it is correct.</p>

<p>When stuff is nested like this we don't necessarily need to expand everything;
it's enough to multiply by the derivative of the inner stuff:</p>

$$\begin{align}\frac{d}{dx}\bigl((\underbrace{2x}_{\substack{\text{inner} \\ \text{stuff}}})^2\bigr)  =2(2x) \cdot \underbrace{\frac{d}{dx}(2x)}_{\substack{\text{derivative of} \\ \text{inner stuff}}}  =4x \cdot 2 = 8x\end{align}$$<p>This is known as the <b>chain rule</b>, and it looks like this in a mathy $f$ and
$g$ form:</p>

$$\begin{align}\frac{d}{dx}f(g(x))=f'(g(x)) \cdot g'(x)\end{align}$$<p>Use it every time you have inside stuff other than $x$.</p>

<h2 id="example-smooth-jumps">Example: Smooth Jumps<a class="headerlink" href="#example-smooth-jumps" title="Link to this title">¶</a></h2><p>Let's say you're making a game where a player can jump over something. If the
player moves right at a steady speed, which of these jumps looks best?</p>

<p><img width="567" height="162" class="asymptote" src="asymptote/291b55ce711b3fd0ae7f55e8503cd3cb.svg" /></p><p>The answer is obvious – the rightmost jump looks best. It's time to figure out
how to make games with jumps like that.</p>

<p>Let's say that $t$ is time and $h$ is the height of our player, so we get this
graph:</p>

<p><img width="255" height="181" class="asymptote" src="asymptote/3e5373529755e3d5df0763bcf79bd5ba.svg" /></p><p><a href="graphs.html#parabolas">This graph looks like a parabola, so its equation is $h=at^2+bt+c$
where $a$, $b$ and $c$ are constants.</a> The
changing rate of height is the falling speed. Let's call that $v$ like
velocity.</p>

$$\begin{align}v = \frac{dh}{dt} = \frac{d}{dt} (at^2+bt+c) = 2at+b\end{align}$$<p>On the other hand, the changing rate of velocity is the acceleration caused by
gravity. Let's call that $g$.</p>

$$\begin{align}g = \frac{dv}{dt} = \frac{d}{dt} (2at+b) = 2a\end{align}$$<p>Note how the $t$ disappeared and we're left with just the constant $2a$. This
makes sense because the gravity is always the same, no matter what time it is.</p>

<p>This Python program...</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>height <span style="color: #666666">=</span> <span style="color: #40a070">0</span>
velocity <span style="color: #666666">=</span> <span style="color: #40a070">10</span>
gravity <span style="color: #666666">=</span> <span style="color: #40a070">2</span>

<span style="color: #007020; font-weight: bold">while</span> height <span style="color: #666666">&gt;=</span> <span style="color: #40a070">0</span>:
    <span style="color: #007020">print</span>(<span style="color: #4070a0">&#39; &#39;</span><span style="color: #666666">*</span>height <span style="color: #666666">+</span> <span style="color: #4070a0">&#39;O&#39;</span>)
    height <span style="color: #666666">+=</span> velocity
    velocity <span style="color: #666666">-=</span> gravity
</pre></div>
<p>...prints this awesome parabola:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>O
          O
                  O
                        O
                            O
                              O
                              O
                            O
                        O
                  O
          O
O
</pre></div>
<p>You can use similar code for doing jumps in games. Here's a demo created with
my <a href="https://github.com/Akuli/math-tutorial/blob/master/canvaswrapper.js">canvaswrapper.js</a> script. Click it and use arrow keys to move the ball.</p>

<script type="text/javascript" src="canvaswrapper.js"></script><canvas id="canvas1" width="600" height="400" tabindex="1"></canvas><script>var screen = new CanvasWrapper('canvas1');

const GRAVITY = 1.5;
var ball = {
  x: screen.width/2,    // centered
  height: 0,            // distance from bottom of screen to ball's bottom
  velocity: 0,          // positive means up
  velocityMax: 30,      // velocity immediately after a jump
  sidewayMovement: 0,   // -1 is left, +1 right
  sidewaySpeed: 10,
  radius: 30,
};


runRepeatedly(function() {
  screen.fill('black');
  screen.drawCircle(ball.x, screen.height-ball.height-ball.radius,
                    ball.radius, 'white');

  ball.x += ball.sidewayMovement * ball.sidewaySpeed;
  ball.height += ball.velocity;
  ball.velocity -= GRAVITY;

  if (ball.height < 0) {
    // ball hits the ground
    ball.height = 0;
    ball.velocity = 0;
  }

  screen.getEvents().forEach(evt => {
    if (evt.type == 'keydown') {
      if (evt.key == 'ArrowLeft') {
        ball.sidewayMovement = -1;
      } else if (evt.key == 'ArrowRight') {
        ball.sidewayMovement = 1;
      } else if (evt.key == 'ArrowUp') {
        ball.velocity = ball.velocityMax;
      }
    } else if (evt.type == 'keyup' && (
          (evt.key == 'ArrowLeft' && ball.sidewayMovement == -1) ||
          (evt.key == 'ArrowRight' && ball.sidewayMovement == 1))) {
      // cancel the previous ArrowLeft or ArrowRight press
      ball.sidewayMovement = 0;
    }
  });
});
</script><p>Here's the code:</p><div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #007020; font-weight: bold">var</span> screen <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">new</span> CanvasWrapper(<span style="color: #4070a0">&#39;canvas1&#39;</span>);

<span style="color: #007020; font-weight: bold">const</span> GRAVITY <span style="color: #666666">=</span> <span style="color: #40a070">1.5</span>;
<span style="color: #007020; font-weight: bold">var</span> ball <span style="color: #666666">=</span> {
  x<span style="color: #666666">:</span> screen.width<span style="color: #666666">/</span><span style="color: #40a070">2</span>,    <span style="color: #60a0b0; font-style: italic">// centered</span>
  height<span style="color: #666666">:</span> <span style="color: #40a070">0</span>,            <span style="color: #60a0b0; font-style: italic">// distance from bottom of screen to ball&#39;s bottom</span>
  velocity<span style="color: #666666">:</span> <span style="color: #40a070">0</span>,          <span style="color: #60a0b0; font-style: italic">// positive means up</span>
  velocityMax<span style="color: #666666">:</span> <span style="color: #40a070">30</span>,      <span style="color: #60a0b0; font-style: italic">// velocity immediately after a jump</span>
  sidewayMovement<span style="color: #666666">:</span> <span style="color: #40a070">0</span>,   <span style="color: #60a0b0; font-style: italic">// -1 is left, +1 right</span>
  sidewaySpeed<span style="color: #666666">:</span> <span style="color: #40a070">10</span>,
  radius<span style="color: #666666">:</span> <span style="color: #40a070">30</span>,
};


runRepeatedly(<span style="color: #007020; font-weight: bold">function</span>() {
  screen.fill(<span style="color: #4070a0">&#39;black&#39;</span>);
  screen.drawCircle(ball.x, screen.height<span style="color: #666666">-</span>ball.height<span style="color: #666666">-</span>ball.radius,
                    ball.radius, <span style="color: #4070a0">&#39;white&#39;</span>);

  ball.x <span style="color: #666666">+=</span> ball.sidewayMovement <span style="color: #666666">*</span> ball.sidewaySpeed;
  ball.height <span style="color: #666666">+=</span> ball.velocity;
  ball.velocity <span style="color: #666666">-=</span> GRAVITY;

  <span style="color: #007020; font-weight: bold">if</span> (ball.height <span style="color: #666666">&lt;</span> <span style="color: #40a070">0</span>) {
    <span style="color: #60a0b0; font-style: italic">// ball hits the ground</span>
    ball.height <span style="color: #666666">=</span> <span style="color: #40a070">0</span>;
    ball.velocity <span style="color: #666666">=</span> <span style="color: #40a070">0</span>;
  }

  screen.getEvents().forEach(evt =&gt; {
    <span style="color: #007020; font-weight: bold">if</span> (evt.type <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;keydown&#39;</span>) {
      <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowLeft&#39;</span>) {
        ball.sidewayMovement <span style="color: #666666">=</span> <span style="color: #666666">-</span><span style="color: #40a070">1</span>;
      } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowRight&#39;</span>) {
        ball.sidewayMovement <span style="color: #666666">=</span> <span style="color: #40a070">1</span>;
      } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowUp&#39;</span>) {
        ball.velocity <span style="color: #666666">=</span> ball.velocityMax;
      }
    } <span style="color: #007020; font-weight: bold">else</span> <span style="color: #007020; font-weight: bold">if</span> (evt.type <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;keyup&#39;</span> <span style="color: #666666">&amp;&amp;</span> (
          (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowLeft&#39;</span> <span style="color: #666666">&amp;&amp;</span> ball.sidewayMovement <span style="color: #666666">==</span> <span style="color: #666666">-</span><span style="color: #40a070">1</span>) <span style="color: #666666">||</span>
          (evt.key <span style="color: #666666">==</span> <span style="color: #4070a0">&#39;ArrowRight&#39;</span> <span style="color: #666666">&amp;&amp;</span> ball.sidewayMovement <span style="color: #666666">==</span> <span style="color: #40a070">1</span>))) {
      <span style="color: #60a0b0; font-style: italic">// cancel the previous ArrowLeft or ArrowRight press</span>
      ball.sidewayMovement <span style="color: #666666">=</span> <span style="color: #40a070">0</span>;
    }
  });
});
</pre></div>
<h2 id="some-history">Some History<a class="headerlink" href="#some-history" title="Link to this title">¶</a></h2><p><a href="https://en.wikipedia.org/wiki/Isaac_Newton">Newton</a> and
<a href="https://en.wikipedia.org/wiki/Gottfried_Wilhelm_Leibniz">Leibniz</a> discovered
this derivative stuff independently, and they didn't exactly agree about which
of them had invented it first. The word "derivative" probably refers to how
derivatives can be easily <i>derived</i> for most functions like in the example
above, but this comic suggests that it refers to Leibniz <i>deriving</i> Newton's
work:</p>

<img src="https://imgs.xkcd.com/comics/newton_and_leibniz.png" style="max-width: 100%;     max-height: 100%;" /><p><small>The comic comes from <a href="https://xkcd.com/626/">https://xkcd.com/626/</a>.</small></p>

<p>Speaking of Leibniz and Newton, our $\frac{dy}{dx}$ derivative notation is the
notation that Leibniz used, and known as Leibniz's notation. Newton used
multiple different notations, including a dot on top of the function like
$\dot f$. The $f'$ notation comes from yet another guy called
<a href="https://en.wikipedia.org/wiki/Joseph-Louis_Lagrange">Lagrange</a>.</p>

<h2 id="more-about-theelous3">More about theelous3<a class="headerlink" href="#more-about-theelous3" title="Link to this title">¶</a></h2><p>This chapter contains a few bits of an old conversation with me and
<a href="https://theelous3.net/">theelous3</a> I found from my IRC logs. I enjoyed reading
it afterwards a lot; it's nice to teach people stuff that I find fun, and it's
<i>awesome</i> when the learner also enjoys it.</p>

<p>Even though math and programming are separate things and you need very little
math for programming, some concepts he had learned from Python helped him
understand math stuff.</p>

<p>theelous3 wasn't very confident at first...</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>&lt;darkf&gt;        Are we doing calculus
&lt;Akuli&gt;        darkf, theelous3 is learning what a derivative is
&lt;theelous3&gt;    darkf: we&#39;re improving my 8 year old&#39;s math skills
</pre></div>
<p>...and he struggled with stuff that was very easy to me...</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>&lt;theelous3&gt;    (x**2 + 2hx + h**2) - x**2 / h
&lt;theelous3&gt;    ?
&lt;Akuli&gt;        theelous3, great you&#39;re making progress :D
&lt;Akuli&gt;        theelous3 learns fast
&lt;Akuli&gt;        theelous3, keep tidying it and try to get rid of the /h
&lt;theelous3&gt;    idk how to do that, but I&#39;ll wing it
&lt;Akuli&gt;        ok :)
&lt;Akuli&gt;        you can start by removing the parentheses
</pre></div>
<p>...but he learned stuff surprisingly fast, and he enjoyed it.</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>&lt;theelous3&gt;    yeah I figured I can just get rid of the x**2&#39;s
&lt;Akuli&gt;        theelous3, great
&lt;Akuli&gt;        thats exactly what you&#39;re supposed to do
&lt;theelous3&gt;    2hx + h**2 / h
....
&lt;theelous3&gt;    I had math fun for the first time ever
</pre></div>
<p><p></p></p>

<div class="box graybox"><p><a href="more-derivatives.html">Click here</a> to read the next derivative chapter.
</p>

</div></div>
</body>
</html>
